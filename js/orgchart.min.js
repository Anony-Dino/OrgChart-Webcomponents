"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),OrgChart=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=n.attachShadow({mode:"open"});i.innerHTML='\n      <div class="oc-container"> </div>\n    ',Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})};var r=n,s={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1},a=Object.assign(s,e),o=a.data,l=document.createElement("div"),c=n.shadowRoot.querySelector(".oc-container");if(n.options=a,delete n.options.data,n.chart=l,n.chartContainer=c,l.dataset.options=JSON.stringify(a),l.setAttribute("class","orgchart"+(""!==a.chartClass?" "+a.chartClass:"")+("t2b"!==a.direction?" "+a.direction:"")),"object"===("undefined"==typeof o?"undefined":_typeof(o)))n.buildHierarchy(l,a.ajaxURL?o:n._attachRel(o,"00"),0);else if("string"==typeof o&&o.startsWith("#"))n.buildHierarchy(l,n._buildJsonDS(document.querySelector(o).children[0]),0);else{var d=document.createElement("i");d.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),l.appendChild(d),n._getJSON(o).then(function(e){r.buildHierarchy(l,a.ajaxURL?e:r._attachRel(e,"00"),0)}).catch(function(e){console.error("failed to fetch datasource for orgchart",e)}).finally(function(){var e=l.querySelector(".spinner");e.parentNode.removeChild(e)})}if(l.addEventListener("click",n._clickChart.bind(n)),a.exportButton&&!c.querySelector(".oc-export-btn")){var h=document.createElement("button"),u=document.createElement("a");h.setAttribute("class","oc-export-btn"+(""!==a.chartClass?" "+a.chartClass:"")),h.innerHTML="Export",h.addEventListener("click",n._clickExportButton.bind(n)),u.setAttribute("class","oc-download-btn"+(""!==a.chartClass?" "+a.chartClass:"")),u.setAttribute("download",a.exportFilename+".png"),c.appendChild(h),c.appendChild(u)}return a.pan&&(c.style.overflow="hidden",l.addEventListener("mousedown",n._onPanStart.bind(n)),l.addEventListener("touchstart",n._onPanStart.bind(n)),document.body.addEventListener("mouseup",n._onPanEnd.bind(n)),document.body.addEventListener("touchend",n._onPanEnd.bind(n))),a.zoom&&(c.addEventListener("wheel",n._onWheeling.bind(n)),c.addEventListener("touchstart",n._onTouchStart.bind(n)),document.body.addEventListener("touchmove",n._onTouchMove.bind(n)),document.body.addEventListener("touchend",n._onTouchEnd.bind(n))),c.appendChild(l),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}},{key:"_closest",value:function(e,t){return e&&(t(e)&&e!==this.chart?e:this._closest(e.parentNode,t))}},{key:"_siblings",value:function(e,t){return Array.from(e.parentNode.children).filter(function(n){return n!==e&&(!t||e.matches(t))})}},{key:"_prevAll",value:function(e,t){for(var n=[],i=e.previousElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.previousElementSibling;return n}},{key:"_nextAll",value:function(e,t){for(var n=[],i=e.nextElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.nextElementSibling;return n}},{key:"_isVisible",value:function(e){return null!==e.offsetParent}},{key:"_addClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.add(t)}):e.classList.add(t)})}},{key:"_removeClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t)})}},{key:"_css",value:function(e,t,n){e.forEach(function(e){e.style[t]=n})}},{key:"_removeAttr",value:function(e,t){e.forEach(function(e){e.removeAttribute(t)})}},{key:"_one",value:function(e,t,n,i){var r=function r(s){try{n.call(i,s)}finally{e.removeEventListener(t,r)}};e.addEventListener(t,r)}},{key:"_getDescElements",value:function(e,t){var n=[];return e.forEach(function(e){return n.push.apply(n,_toConsumableArray(e.querySelectorAll(t)))}),n}},{key:"_getJSON",value:function(e){return new Promise(function(t,n){function i(){4===this.readyState&&(200===this.status?t(JSON.parse(this.response)):n(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Content-Type","application/json"),r.send()})}},{key:"_buildJsonDS",value:function(e){var t=this,n={name:e.firstChild.textContent.trim(),relationship:("LI"===e.parentNode.parentNode.nodeName?"1":"0")+(e.parentNode.children.length>1?1:0)+(e.children.length?1:0)};return e.id&&(n.id=e.id),e.querySelector("ul")&&Array.from(e.querySelector("ul").children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._buildJsonDS(e))}),n}},{key:"_attachRel",value:function(e,t){if(e.relationship=t+(e.children&&e.children.length>0?1:0),e.children){var n=!0,i=!1,r=void 0;try{for(var s,a=e.children[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;this._attachRel(o,"1"+(e.children.length>1?1:0))}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}return e}},{key:"_repaint",value:function(e){e&&(e.style.offsetWidth=e.offsetWidth)}},{key:"_isInAction",value:function(e){return e.querySelector(":scope > .edge").className.indexOf("fa-")>-1}},{key:"_getNodeState",value:function(e,t){var n=this,i=void 0,r={exist:!1,visible:!1};return"parent"===t?(i=this._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}),i&&(r.exist=!0),r.exist&&this._isVisible(i.parentNode.children[0])&&(r.visible=!0)):"children"===t?(i=this._closest(e,function(e){return"TR"===e.nodeName}).nextElementSibling,i&&(r.exist=!0),r.exist&&this._isVisible(i)&&(r.visible=!0)):"siblings"===t&&(i=this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode),i.length&&(r.exist=!0),r.exist&&i.some(function(e){return n._isVisible(e)})&&(r.visible=!0)),r}},{key:"getRelatedNodes",value:function(e,t){return"parent"===t?this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"):"children"===t?Array.from(this._closest(e,function(e){return"TABLE"===e.nodeName}).lastChild.children).map(function(e){return e.querySelector(".node")}):"siblings"===t?this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")}):[]}},{key:"_switchHorizontalArrow",value:function(e){var t=this.options,n=e.querySelector(".leftEdge"),i=e.querySelector(".rightEdge"),r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;if(t.toggleSiblingsResp&&("undefined"==typeof t.ajaxURL||this._closest(e,function(e){return e.classList.contains(".nodes")}).dataset.siblingsLoaded)){var s=r.previousElementSibling,a=r.nextElementSibling;s&&(s.classList.contains("hidden")?(n.classList.add("fa-chevron-left"),n.classList.remove("fa-chevron-right")):(n.classList.add("fa-chevron-right"),n.classList.remove("fa-chevron-left"))),a&&(a.classList.contains("hidden")?(i.classList.add("fa-chevron-right"),i.classList.remove("fa-chevron-left")):(i.classList.add("fa-chevron-left"),i.classList.remove("fa-chevron-right")))}else{var o=this._siblings(r),l=!!o.length&&!o.some(function(e){return e.classList.contains("hidden")});n.classList.toggle("fa-chevron-right",l),n.classList.toggle("fa-chevron-left",!l),i.classList.toggle("fa-chevron-left",l),i.classList.toggle("fa-chevron-right",!l)}}},{key:"_hoverNode",value:function(e){var t=e.target,n=!1,i=t.querySelector(":scope > .topEdge"),r=t.querySelector(":scope > .bottomEdge"),s=t.querySelector(":scope > .leftEdge");"mouseenter"===e.type?(i&&(n=this._getNodeState(t,"parent").visible,i.classList.toggle("fa-chevron-up",!n),i.classList.toggle("fa-chevron-down",n)),r&&(n=this._getNodeState(t,"children").visible,r.classList.toggle("fa-chevron-down",!n),r.classList.toggle("fa-chevron-up",n)),s&&this._switchHorizontalArrow(t)):Array.from(t.querySelectorAll(":scope > .edge")).forEach(function(e){e.classList.remove("fa-chevron-up","fa-chevron-down","fa-chevron-right","fa-chevron-left")})}},{key:"_clickNode",value:function(e){var t=e.currentTarget,n=this.chart.querySelector(".focused");n&&n.classList.remove("focused"),t.classList.add("focused")}},{key:"_buildParentNode",value:function(e,t,n){var i=this,r=document.createElement("table");t.relationship="001",this._createNode(t,0).then(function(e){var t=i.chart;e.classList.remove("slide-up"),e.classList.add("slide-down");var s=document.createElement("tr"),a=document.createElement("tr"),o=document.createElement("tr"),l=document.createElement("tr");s.setAttribute("class","hidden"),s.innerHTML='<td colspan="2"></td>',r.appendChild(s),a.setAttribute("class","lines hidden"),a.innerHTML='<td colspan="2"><div class="downLine"></div></td>',r.appendChild(a),o.setAttribute("class","lines hidden"),o.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',r.appendChild(o),l.setAttribute("class","nodes"),l.innerHTML='<td colspan="2"></td>',r.appendChild(l),r.querySelector("td").appendChild(e),t.insertBefore(r,t.children[0]),r.children[3].children[0].appendChild(t.lastChild),n()}).catch(function(e){console.error("Failed to create parent node",e)})}},{key:"_switchVerticalArrow",value:function(e){e.classList.toggle("fa-chevron-up"),e.classList.toggle("fa-chevron-down")}},{key:"showParent",value:function(e){var t=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));this._removeClass(t,"hidden"),this._addClass(Array(t[0].children).slice(1,-1),"hidden");var n=t[2].querySelector(".node");this._one(n,"transitionend",function(){n.classList.remove("slide"),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(":scope > .topEdge"))},this),this._repaint(n),n.classList.add("slide"),n.classList.remove("slide-down")}},{key:"showSiblings",value:function(e,t){var n=this,i=[],r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;i=t?"left"===t?this._prevAll(r):this._nextAll(r):this._siblings(r),this._removeClass(i,"hidden");var s=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));if(r=Array.from(s[0].querySelectorAll(":scope > .hidden")),t?this._removeClass(r.slice(0,2*i.length),"hidden"):this._removeClass(r,"hidden"),!this._getNodeState(e,"parent").visible){this._removeClass(s,"hidden");var a=s[2].querySelector(".node");this._one(a,"transitionend",function(e){e.target.classList.remove("slide")},this),this._repaint(a),a.classList.add("slide"),a.classList.remove("slide-down")}i.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&(e.classList.add("slide"),e.classList.remove("slide-left","slide-right"))})}),this._one(i[0].querySelector(".slide"),"transitionend",function(){var t=this;i.forEach(function(e){t._removeClass(Array.from(e.querySelectorAll(".slide")),"slide")}),this._isInAction(e)&&(this._switchHorizontalArrow(e),e.querySelector(".topEdge").classList.remove("fa-chevron-up"),e.querySelector(".topEdge").classList.add("fa-chevron-down"))},this)}},{key:"hideSiblings",value:function(e,t){var n=this,i=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode,r=this._siblings(i);if(r.forEach(function(e){e.querySelector(".spinner")&&(n.chart.dataset.inAjax=!1)}),!t||t&&"left"===t){var s=this._prevAll(i);s.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-right")})})}if(!t||t&&"left"!==t){var a=this._nextAll(i);a.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-left")})})}var o=[];this._siblings(i).forEach(function(e){Array.prototype.push.apply(o,Array.from(e.querySelectorAll(".slide")))});var l=[],c=!0,d=!1,h=void 0;try{for(var u,f=o[Symbol.iterator]();!(c=(u=f.next()).done);c=!0){var p=u.value,v=this._closest(p,function(e){return e.classList.contains("nodes")}).previousElementSibling;l.push(v),l.push(v.previousElementSibling)}}catch(e){d=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw h}}l=[].concat(_toConsumableArray(new Set(l))),l.forEach(function(e){e.style.visibility="hidden"}),this._one(o[0],"transitionend",function(n){var r=this;l.forEach(function(e){e.removeAttribute("style")});var s=[];s=t?"left"===t?this._prevAll(i,":not(.hidden)"):this._nextAll(i,":not(.hidden)"):this._siblings(i);var a=Array.from(this._closest(i,function(e){return e.classList.contains("nodes")}).previousElementSibling.querySelectorAll(":scope > :not(.hidden)")),c=a.slice(1,t?2*s.length+1:-1);this._addClass(c,"hidden"),this._removeClass(o,"slide"),s.forEach(function(e){Array.from(e.querySelectorAll(".node")).slice(1).forEach(function(e){r._isVisible(e)&&(e.classList.remove("slide-left","slide-right"),e.classList.add("slide-up"))})}),s.forEach(function(e){r._addClass(Array.from(e.querySelectorAll(".lines")),"hidden"),r._addClass(Array.from(e.querySelectorAll(".nodes")),"hidden"),r._addClass(Array.from(e.querySelectorAll(".verticalNodes")),"hidden")}),this._addClass(s,"hidden"),this._isInAction(e)&&this._switchHorizontalArrow(e)},this)}},{key:"hideParent",value:function(e){var t=Array.from(this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children).slice(0,3);t[0].querySelector(".spinner")&&(this.chart.dataset.inAjax=!1),this._getNodeState(e,"siblings").visible&&this.hideSiblings(e);var n=t.slice(1);this._css(n,"visibility","hidden");var i=t[0].querySelector(".node"),r=this._getNodeState(i,"parent").visible;i&&this._isVisible(i)&&(i.classList.add("slide","slide-down"),this._one(i,"transitionend",function(){i.classList.remove("slide"),this._removeAttr(n,"style"),this._addClass(t,"hidden")},this)),i&&r&&this.hideParent(i)}},{key:"addParent",value:function(e,t){var n=this;this._buildParentNode(e,t,function(){if(!e.querySelector(":scope > .topEdge")){var t=document.createElement("i");t.setAttribute("class","edge verticalEdge topEdge fa"),e.appendChild(t)}n.showParent(e)})}},{key:"_startLoading",value:function(e,t){var n=this.options,i=this.chart;if("undefined"!=typeof i.dataset.inAjax&&"true"===i.dataset.inAjax)return!1;e.classList.add("hidden");var r=document.createElement("i");r.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),t.appendChild(r),this._addClass(Array.from(t.querySelectorAll(":scope > *:not(.spinner)")),"hazy"),i.dataset.inAjax=!0;var s=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));return s&&(s.disabled=!0),!0}},{key:"_endLoading",value:function(e,t){var n=this.options;e.classList.remove("hidden"),t.querySelector(":scope > .spinner").remove(),this._removeClass(Array.from(t.querySelectorAll(":scope > .hazy")),"hazy"),this.chart.dataset.inAjax=!1;var i=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));i&&(i.disabled=!1)}},{key:"_clickTopEdge",value:function(e){e.stopPropagation();var t=this,n=e.target,i=n.parentNode,r=this._getNodeState(i,"parent"),s=this.options;if(r.exist){var a=this._closest(i,function(e){return e.classList.contains("nodes")}),o=a.parentNode.firstChild.querySelector(".node");if(o.classList.contains("slide"))return;r.visible?(this.hideParent(i),this._one(o,"transitionend",function(){this._isInAction(i)&&(this._switchVerticalArrow(n),this._switchHorizontalArrow(i))},this)):this.showParent(i)}else{var l=n.parentNode.id;this._startLoading(n,i)&&this._getJSON("function"==typeof s.ajaxURL.parent?s.ajaxURL.parent(i.dataset.source):s.ajaxURL.parent+l).then(function(e){"true"===t.chart.dataset.inAjax&&Object.keys(e).length&&t.addParent(i,e)}).catch(function(e){console.error("Failed to get parent node data.",e)}).finally(function(){t._endLoading(n,i)})}}},{key:"hideChildren",value:function(e){var t=this,n=this._nextAll(e.parentNode.parentNode),i=n[n.length-1],r=[];i.querySelector(".spinner")&&(this.chart.dataset.inAjax=!1);var s=Array.from(i.querySelectorAll(".node")).filter(function(e){return t._isVisible(e)}),a=i.classList.contains("verticalNodes");a||(s.forEach(function(e){Array.prototype.push.apply(r,t._prevAll(t._closest(e,function(e){return e.classList.contains("nodes")}),".lines"))}),r=[].concat(_toConsumableArray(new Set(r))),this._css(r,"visibility","hidden")),this._one(s[0],"transitionend",function(o){this._removeClass(s,"slide"),a?t._addClass(n,"hidden"):(r.forEach(function(e){e.removeAttribute("style"),e.classList.add("hidden"),e.parentNode.lastChild.classList.add("hidden")}),this._addClass(Array.from(i.querySelectorAll(".verticalNodes")),"hidden")),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(s,"slide slide-up")}},{key:"showChildren",value:function(e){var t=this,n=this,i=this._nextAll(e.parentNode.parentNode),r=[];this._removeClass(i,"hidden"),i.some(function(e){return e.classList.contains("verticalNodes")})?i.forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}):Array.from(i[2].children).forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelector("tr").querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}),this._repaint(r[0]),this._one(r[0],"transitionend",function(n){t._removeClass(r,"slide"),t._isInAction(e)&&t._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(r,"slide"),this._removeClass(r,"slide-up")}},{key:"_buildChildNode",value:function(e,t,n){var i=t.children||t.siblings;e.querySelector("td").setAttribute("colSpan",2*i.length),this.buildHierarchy(e,{children:i},0,n)}},{key:"addChildren",value:function(e,t){var n=this,i=this.options,r=0;this.chart.dataset.inEdit="addChildren",this._buildChildNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(++r===t.children.length){if(!e.querySelector(".bottomEdge")){var s=document.createElement("i");s.setAttribute("class","edge verticalEdge bottomEdge fa"),e.appendChild(s)}if(!e.querySelector(".symbol")){var a=document.createElement("i");a.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),e.querySelector(":scope > .title").appendChild(a)}n.showChildren(e),n.chart.dataset.inEdit=""}})}},{key:"_clickBottomEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,a=this._getNodeState(s,"children");if(a.exist){var o=this._closest(s,function(e){return"TR"===e.nodeName}).parentNode.lastChild;if(Array.from(o.querySelectorAll(".node")).some(function(e){return t._isVisible(e)&&e.classList.contains("slide")}))return;a.visible?this.hideChildren(s):this.showChildren(s)}else{var l=r.parentNode.id;this._startLoading(r,s)&&this._getJSON("function"==typeof i.ajaxURL.children?i.ajaxURL.children(s.dataset.source):i.ajaxURL.children+l).then(function(e){"true"===n.chart.dataset.inAjax&&e.children.length&&n.addChildren(s,e)}).catch(function(e){console.error("Failed to get children nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_complementLine",value:function(e,t,n){var i=e.parentNode.parentNode.children;i[0].children[0].setAttribute("colspan",2*t),i[1].children[0].setAttribute("colspan",2*t);for(var r=0;r<n;r++){var s=document.createElement("td"),a=document.createElement("td");s.setAttribute("class","rightLine topLine"),s.innerHTML="&nbsp;",i[2].insertBefore(s,i[2].children[1]),a.setAttribute("class","leftLine topLine"),a.innerHTML="&nbsp;",i[2].insertBefore(a,i[2].children[1])}}},{key:"_buildSiblingNode",value:function(e,t,n){var i=this,r=this,s=t.siblings?t.siblings.length:t.children.length,a="TD"===e.parentNode.nodeName?this._closest(e,function(e){return"TR"===e.nodeName}).children.length:1,o=a+s,l=o>1?Math.floor(o/2-1):0;"TD"===e.parentNode.nodeName?!function(){var c=i._prevAll(e.parentNode.parentNode);c[0].remove(),c[1].remove();var d=0;r._buildChildNode.call(r,r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}),t,function(){++d===s&&!function(){var t=Array.from(r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}).lastChild.children);if(a>1){var i=e.parentNode.parentNode;Array.from(i.children).forEach(function(e){t[0].parentNode.insertBefore(e,t[0])}),i.remove(),r._complementLine(t[0],o,a),r._addClass(t,"hidden"),t.forEach(function(e){r._addClass(e.querySelectorAll(".node"),"slide-left")})}else{var s=e.parentNode.parentNode;t[l].parentNode.insertBefore(e.parentNode,t[l+1]),s.remove(),r._complementLine(t[l],o,1),r._addClass(t,"hidden"),r._addClass(r._getDescElements(t.slice(0,l+1),".node"),"slide-right"),r._addClass(r._getDescElements(t.slice(l+1),".node"),"slide-left")}n()}()})}():!function(){var s=0;r.buildHierarchy.call(r,r.chart,t,0,function(){if(++s===o){var t=e.nextElementSibling.children[3].children[l],a=document.createElement("td");a.setAttribute("colspan",2),a.appendChild(e),t.parentNode.insertBefore(a,t.nextElementSibling),r._complementLine(t,o,1);var c=r._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0];c.classList.add("hidden"),r._addClass(Array.from(c.querySelectorAll(".node")),"slide-down");var d=i._siblings(e.parentNode);r._addClass(d,"hidden"),r._addClass(r._getDescElements(d.slice(0,l),".node"),"slide-right"),r._addClass(r._getDescElements(d.slice(l),".node"),"slide-left"),n()}})}()}},{key:"addSiblings",value:function(e,t){var n=this;this.chart.dataset.inEdit="addSiblings",this._buildSiblingNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(n._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).dataset.siblingsLoaded=!0,!e.querySelector(".leftEdge")){var t=document.createElement("i"),i=document.createElement("i");t.setAttribute("class","edge horizontalEdge rightEdge fa"),e.appendChild(t),i.setAttribute("class","edge horizontalEdge leftEdge fa"),e.appendChild(i)}n.showSiblings(e),n.chart.dataset.inEdit=""})}},{key:"removeNodes",value:function(e){var t=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode,n=this._siblings(t.parentNode);"TD"===t.nodeName?this._getNodeState(e,"siblings").exist?(n[2].querySelector(".topLine").nextElementSibling.remove(),n[2].querySelector(".topLine").remove(),n[0].children[0].setAttribute("colspan",n[2].children.length),n[1].children[0].setAttribute("colspan",n[2].children.length),t.remove()):(n[0].children[0].removeAttribute("colspan"),n[0].querySelector(".bottomEdge").remove(),this._siblings(n[0]).forEach(function(e){return e.remove()})):Array.from(t.parentNode.children).forEach(function(e){return e.remove()})}},{key:"_clickHorizontalEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,a=this._getNodeState(s,"siblings");if(a.exist){var o=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode,l=this._siblings(o);if(l.some(function(e){var n=e.querySelector(".node");return t._isVisible(n)&&n.classList.contains("slide")}))return;if(i.toggleSiblingsResp){var c=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.previousElementSibling,d=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.nextElementSibling;r.classList.contains("leftEdge")?c.classList.contains("hidden")?this.showSiblings(s,"left"):this.hideSiblings(s,"left"):d.classList.contains("hidden")?this.showSiblings(s,"right"):this.hideSiblings(s,"right")}else a.visible?this.hideSiblings(s):this.showSiblings(s)}else{var h=r.parentNode.id,u=this._getNodeState(s,"parent").exist?"function"==typeof i.ajaxURL.siblings?i.ajaxURL.siblings(JSON.parse(s.dataset.source)):i.ajaxURL.siblings+h:"function"==typeof i.ajaxURL.families?i.ajaxURL.families(JSON.parse(s.dataset.source)):i.ajaxURL.families+h;this._startLoading(r,s)&&this._getJSON(u).then(function(e){"true"===n.chart.dataset.inAjax&&(e.siblings||e.children)&&n.addSiblings(s,e)}).catch(function(e){console.error("Failed to get sibling nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_clickToggleButton",value:function(e){var t=this,n=e.target,i=n.parentNode.nextElementSibling,r=Array.from(i.querySelectorAll(".node")),s=Array.from(i.children).map(function(e){return e.querySelector(".node")});s.some(function(e){return e.classList.contains("slide")})||(n.classList.toggle("fa-plus-square"),n.classList.toggle("fa-minus-square"),r[0].classList.contains("slide-up")?(i.classList.remove("hidden"),this._repaint(s[0]),this._addClass(s,"slide"),this._removeClass(s,"slide-up"),this._one(s[0],"transitionend",function(){t._removeClass(s,"slide")})):(this._addClass(r,"slide slide-up"),this._one(r[0],"transitionend",function(){t._removeClass(r,"slide"),r.forEach(function(e){var n=t._closest(e,function(e){return"UL"===e.nodeName});n.classList.add("hidden")})}),r.forEach(function(e){var n=Array.from(e.querySelectorAll(".toggleBtn"));t._removeClass(n,"fa-minus-square"),t._addClass(n,"fa-plus-square")})))}},{key:"_dispatchClickEvent",value:function(e){var t=e.target.classList;t.contains("topEdge")?this._clickTopEdge(e):t.contains("rightEdge")||t.contains("leftEdge")?this._clickHorizontalEdge(e):t.contains("bottomEdge")?this._clickBottomEdge(e):t.contains("toggleBtn")?this._clickToggleButton(e):this._clickNode(e)}},{key:"_onDragStart",value:function(e){var t=e.target,n=this.options,i=/firefox/.test(window.navigator.userAgent.toLowerCase());if(i&&e.dataTransfer.setData("text/html","hack for firefox"),this.chart.style.transform){var r=void 0,s=void 0;document.querySelector(".ghost-node")?(r=this.chart.querySelector(":scope > .ghost-node"),s=r.children[0]):(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.classList.add("ghost-node"),s=document.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(s),this.chart.appendChild(r));var a=this.chart.style.transform.split(","),o=Math.abs(window.parseFloat("t2b"===n.direction||"b2t"===n.direction?a[0].slice(a[0].indexOf("(")+1):a[1]));r.setAttribute("width",t.offsetWidth),r.setAttribute("height",t.offsetHeight),s.setAttribute("x",5*o),s.setAttribute("y",5*o),s.setAttribute("width",120*o),s.setAttribute("height",40*o),s.setAttribute("rx",4*o),s.setAttribute("ry",4*o),s.setAttribute("stroke-width",1*o);var l=e.offsetX*o,c=e.offsetY*o;if("l2r"===n.direction?(l=e.offsetY*o,c=e.offsetX*o):"r2l"===n.direction?(l=t.offsetWidth-e.offsetY*o,c=e.offsetX*o):"b2t"===n.direction&&(l=t.offsetWidth-e.offsetX*o,c=t.offsetHeight-e.offsetY*o),i){var d=document.createElement("img");d.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),e.dataTransfer.setDragImage(d,l,c),s.setAttribute("fill","rgb(255, 255, 255)"),s.setAttribute("stroke","rgb(191, 0, 0)")}else e.dataTransfer.setDragImage(r,l,c)}var h=e.target,u=this._closest(h,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"),f=Array.from(this._closest(h,function(e){return"TABLE"===e.nodeName}).querySelectorAll(".node"));this.dragged=h,Array.from(this.chart.querySelectorAll(".node")).forEach(function(e){f.includes(e)||(n.dropCriteria?n.dropCriteria(h,u,e)&&e.classList.add("allowedDrop"):e.classList.add("allowedDrop"))})}},{key:"_onDragOver",value:function(e){e.preventDefault();var t=e.currentTarget;t.classList.contains("allowedDrop")||(e.dataTransfer.dropEffect="none")}},{key:"_onDragEnd",value:function(e){Array.from(this.chart.querySelectorAll(".allowedDrop")).forEach(function(e){e.classList.remove("allowedDrop")})}},{key:"_onDrop",value:function(e){var t=e.currentTarget,n=this.chart,i=this.dragged,r=this._closest(i,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].children[0];if(this._removeClass(Array.from(n.querySelectorAll(".allowedDrop")),"allowedDrop"),t.parentNode.parentNode.nextElementSibling){var s=window.parseInt(t.parentNode.colSpan)+2;if(t.parentNode.setAttribute("colspan",s),t.parentNode.parentNode.nextElementSibling.children[0].setAttribute("colspan",s),!i.querySelector(".horizontalEdge")){var a=document.createElement("i"),o=document.createElement("i");a.setAttribute("class","edge horizontalEdge rightEdge fa"),i.appendChild(a),o.setAttribute("class","edge horizontalEdge leftEdge fa"),i.appendChild(o)}var l=t.parentNode.parentNode.nextElementSibling.nextElementSibling,c=document.createElement("td"),d=document.createElement("td");c.setAttribute("class","leftLine topLine"),c.innerHTML="&nbsp;",l.insertBefore(c,l.children[1]),d.setAttribute("class","rightLine topLine"),d.innerHTML="&nbsp;",l.insertBefore(d,l.children[2]),l.nextElementSibling.appendChild(this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode);var h=this._siblings(this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")});if(1===h.length){var u=document.createElement("i"),f=document.createElement("i");u.setAttribute("class","edge horizontalEdge rightEdge fa"),h[0].appendChild(u),f.setAttribute("class","edge horizontalEdge leftEdge fa"),h[0].appendChild(f)}}else{var p=document.createElement("i");p.setAttribute("class","edge verticalEdge bottomEdge fa"),t.appendChild(p),t.parentNode.setAttribute("colspan",2);var v=this._closest(t,function(e){return"TABLE"===e.nodeName}),g=document.createElement("tr"),m=document.createElement("tr"),y=document.createElement("tr");g.setAttribute("class","lines"),g.innerHTML='<td colspan="2"><div class="downLine"></div></td>',v.appendChild(g),m.setAttribute("class","lines"),m.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',v.appendChild(m),y.setAttribute("class","nodes"),v.appendChild(y),Array.from(i.querySelectorAll(".horizontalEdge")).forEach(function(e){i.removeChild(e)});var b=this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode;y.appendChild(b)}var _=window.parseInt(r.colSpan);if(_>2){r.setAttribute("colspan",_-2),r.parentNode.nextElementSibling.children[0].setAttribute("colspan",_-2);var E=r.parentNode.nextElementSibling.nextElementSibling;E.children[1].remove(),E.children[1].remove();var L=Array.from(r.parentNode.parentNode.children[3].children).map(function(e){return e.querySelector(".node")});1===L.length&&(L[0].querySelector(".leftEdge").remove(),L[0].querySelector(".rightEdge").remove())}else r.removeAttribute("colspan"),r.querySelector(".node").removeChild(r.querySelector(".bottomEdge")),Array.from(r.parentNode.parentNode.children).slice(1).forEach(function(e){return e.remove()});var A=new CustomEvent("nodedropped.orgchart",{detail:{draggedNode:i,dragZone:r.children[0],dropZone:t}});n.dispatchEvent(A);
}},{key:"_createNode",value:function(e,t){var n=this,i=this.options;return new Promise(function(r,s){if(e.children){var a=!0,o=!1,l=void 0;try{for(var c,d=e.children[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value;h.parentId=e.id}}catch(e){o=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw l}}}var u=document.createElement("div");delete e.children,u.dataset.source=JSON.stringify(e),e[i.nodeId]&&(u.id=e[i.nodeId]);var f=n.chart.dataset.inEdit,p=void 0;p=f?"addChildren"===f?" slide-up":"":t>=i.depth?" slide-up":"",u.setAttribute("class","node "+(e.className||"")+p),i.draggable&&u.setAttribute("draggable",!0),e.parentId&&u.setAttribute("data-parent",e.parentId),u.innerHTML='\n        <div class="title">'+e[i.nodeTitle]+"</div>\n        "+(i.nodeContent?'<div class="content">'+e[i.nodeContent]+"</div>":"")+"\n      ";var v=e.relationship||"";if(i.verticalDepth&&t+2>i.verticalDepth){if(t+1>=i.verticalDepth&&Number(v.substr(2,1))){var g=document.createElement("i"),m=t+1>=i.depth?"plus":"minus";g.setAttribute("class","toggleBtn fa fa-"+m+"-square"),u.appendChild(g)}}else{if(Number(v.substr(0,1))){var y=document.createElement("i");y.setAttribute("class","edge verticalEdge topEdge fa"),u.appendChild(y)}if(Number(v.substr(1,1))){var b=document.createElement("i"),_=document.createElement("i");b.setAttribute("class","edge horizontalEdge rightEdge fa"),u.appendChild(b),_.setAttribute("class","edge horizontalEdge leftEdge fa"),u.appendChild(_)}if(Number(v.substr(2,1))){var E=document.createElement("i"),L=document.createElement("i"),A=u.querySelector(":scope > .title");E.setAttribute("class","edge verticalEdge bottomEdge fa"),u.appendChild(E),L.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),A.insertBefore(L,A.children[0])}}u.addEventListener("mouseenter",n._hoverNode.bind(n)),u.addEventListener("mouseleave",n._hoverNode.bind(n)),u.addEventListener("click",n._dispatchClickEvent.bind(n)),i.draggable&&(u.addEventListener("dragstart",n._onDragStart.bind(n)),u.addEventListener("dragover",n._onDragOver.bind(n)),u.addEventListener("dragend",n._onDragEnd.bind(n)),u.addEventListener("drop",n._onDrop.bind(n))),i.createNode&&i.createNode(u,e),r(u)})}},{key:"buildHierarchy",value:function(e,t,n,i){var r=this,s=this.options,a=void 0,o=t.children,l=s.verticalDepth&&n+1>=s.verticalDepth;Object.keys(t).length>1&&(a=l?e:document.createElement("table"),l||e.appendChild(a),this._createNode(t,n).then(function(e){if(l)a.insertBefore(e,a.firstChild);else{var t=document.createElement("tr");t.innerHTML="\n            <td "+(o?'colspan="'+2*o.length+'"':"")+">\n            </td>\n          ",t.children[0].appendChild(e),a.insertBefore(t,a.children[0]?a.children[0]:null)}i&&i()}).catch(function(e){console.error("Failed to creat node",e)})),o&&!function(){1===Object.keys(t).length&&(a=e);var l=void 0,c=s.verticalDepth&&n+2>=s.verticalDepth,d=r.chart.dataset.inEdit;if(l=d?"addSiblings"===d?"":" hidden":n+1>=s.depth?" hidden":"",!c){var h=document.createElement("tr");h.setAttribute("class","lines"+l),h.innerHTML='\n          <td colspan="'+2*o.length+'">\n            <div class="downLine"></div>\n          </td>\n        ',a.appendChild(h)}var u=document.createElement("tr");u.setAttribute("class","lines"+l),u.innerHTML='\n        <td class="rightLine">&nbsp;</td>\n        '+o.slice(1).map(function(){return'\n          <td class="leftLine topLine">&nbsp;</td>\n          <td class="rightLine topLine">&nbsp;</td>\n          '}).join("")+'\n        <td class="leftLine">&nbsp;</td>\n      ';var f=void 0;if(c)if(f=document.createElement("ul"),l&&f.classList.add(l.trim()),n+2===s.verticalDepth){var p=document.createElement("tr");p.setAttribute("class","verticalNodes"+l),p.innerHTML="<td></td>",p.firstChild.appendChild(f),a.appendChild(p)}else a.appendChild(f);else f=document.createElement("tr"),f.setAttribute("class","nodes"+l),a.appendChild(u),a.appendChild(f);o.forEach(function(e){var t=void 0;c?t=document.createElement("li"):(t=document.createElement("td"),t.setAttribute("colspan",2)),f.appendChild(t),r.buildHierarchy(t,e,n+1,i)})}()}},{key:"_clickChart",value:function(e){var t=this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")});!t&&this.chart.querySelector(".node.focused")&&this.chart.querySelector(".node.focused").classList.remove("focused")}},{key:"_clickExportButton",value:function(){var e=this.options,t=this.chartContainer,n=t.querySelector(":scope > .mask"),i=t.querySelector(".orgchart:not(.hidden)"),r="l2r"===e.direction||"r2l"===e.direction;n?n.classList.remove("hidden"):(n=document.createElement("div"),n.setAttribute("class","mask"),n.innerHTML='<i class="fa fa-circle-o-notch fa-spin spinner"></i>',t.appendChild(n)),t.classList.add("canvasContainer"),window.html2canvas(i,{width:r?i.clientHeight:i.clientWidth,height:r?i.clientWidth:i.clientHeight,onclone:function(e){var t=e.querySelector(".canvasContainer");t.style.overflow="visible",t.querySelector(".orgchart:not(.hidden)").transform=""}}).then(function(e){var n=t.querySelector(".oc-download-btn");t.querySelector(".mask").classList.add("hidden"),n.setAttribute("href",e.toDataURL()),n.click()}).catch(function(e){console.error("Failed to export the curent orgchart!",e)}).finally(function(){t.classList.remove("canvasContainer")})}},{key:"_loopChart",value:function(e){var t=this,n={id:e.querySelector(".node").id};return e.children[3]&&Array.from(e.children[3].children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._loopChart(e.firstChild))}),n}},{key:"getHierarchy",value:function(){return this.chart.querySelector(".node").id?this._loopChart(this.chart.querySelector("table")):"Error: Nodes of orghcart to be exported must have id attribute!"}},{key:"_onPanStart",value:function(e){var t=e.currentTarget;if(this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})||e.touches&&e.touches.length>1)return void(t.dataset.panning=!1);t.style.cursor="move",t.dataset.panning=!0;var n=0,i=0,r=window.getComputedStyle(t).transform;if("none"!==r){var s=r.split(",");r.includes("3d")?(n=Number.parseInt(s[12],10),i=Number.parseInt(s[13],10)):(n=Number.parseInt(s[4],10),i=Number.parseInt(s[5],10))}var a=0,o=0;if(e.targetTouches){if(1===e.targetTouches.length)a=e.targetTouches[0].pageX-n,o=e.targetTouches[0].pageY-i;else if(e.targetTouches.length>1)return}else a=e.pageX-n,o=e.pageY-i;t.dataset.panStart=JSON.stringify({startX:a,startY:o}),t.addEventListener("mousemove",this._onPanning.bind(this)),t.addEventListener("touchmove",this._onPanning.bind(this))}},{key:"_onPanning",value:function(e){var t=e.currentTarget;if("false"!==t.dataset.panning){var n=0,i=0,r=JSON.parse(t.dataset.panStart),s=r.startX,a=r.startY;if(e.targetTouches){if(1===e.targetTouches.length)n=e.targetTouches[0].pageX-s,i=e.targetTouches[0].pageY-a;else if(e.targetTouches.length>1)return}else n=e.pageX-s,i=e.pageY-a;var o=window.getComputedStyle(t).transform;if("none"===o)o.includes("3d")?t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+i+", 0, 1)":t.style.transform="matrix(1, 0, 0, 1, "+n+", "+i+")";else{var l=o.split(",");o.includes("3d")?(l[12]=n,l[13]=i):(l[4]=n,l[5]=i+")"),t.style.transform=l.join(",")}}}},{key:"_onPanEnd",value:function(e){var t=this.chart;"true"===t.dataset.panning&&(t.dataset.panning=!1,t.style.cursor="default",document.body.removeEventListener("mousemove",this._onPanning),document.body.removeEventListener("touchmove",this._onPanning))}},{key:"_setChartScale",value:function(e,t){var n=window.getComputedStyle(e).transform;if("none"===n)e.style.transform="scale("+t+","+t+")";else{var i=n.split(",");n.includes("3d")?e.style.transform=n+" scale3d("+t+","+t+", 1)":(i[0]="matrix("+t,i[3]=t,e.style.transform=n+" scale("+t+","+t+")")}e.dataset.scale=t}},{key:"_onWheeling",value:function(e){e.preventDefault();var t=e.deltaY>0?.8:1.2;this._setChartScale(this.chart,t)}},{key:"_getPinchDist",value:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))}},{key:"_onTouchStart",value:function(e){var t=this.chart;if(e.touches&&2===e.touches.length){var n=this._getPinchDist(e);t.dataset.pinching=!0,t.dataset.pinchDistStart=n}}},{key:"_onTouchMove",value:function(e){var t=this.chart;if(t.dataset.pinching){var n=this._getPinchDist(e);t.dataset.pinchDistEnd=n}}},{key:"_onTouchEnd",value:function(e){var t=this.chart;if(t.dataset.pinching){t.dataset.pinching=!1;var n=t.dataset.pinchDistEnd-t.dataset.pinchDistStart;n>0?this._setChartScale(t,1):n<0&&this._setChartScale(t,-1)}}}]),t}(HTMLElement);exports.default=OrgChart;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0LXdlYmNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsiT3JnQ2hhcnQiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImNhbGwiLCJzaGFkb3dSb290IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImlubmVySFRNTCIsIlByb21pc2UiLCJwcm90b3R5cGUiLCJmaW5hbGx5IiwiY2FsbGJhY2siLCJQIiwiY29uc3RydWN0b3IiLCJ0aGVuIiwidmFsdWUiLCJyZXNvbHZlIiwicmVhc29uIiwidGhhdCIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJkcmFnZ2FibGUiLCJwYW4iLCJvcHRzIiwiYXNzaWduIiwiZGF0YSIsImNoYXJ0IiwiZG9jdW1lbnQiLCJjaGFydENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhc2V0IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldEF0dHJpYnV0ZSIsImRpcmVjdGlvbiIsImFqYXhVUkwiLCJfYXR0YWNoUmVsIiwic3RhcnRzV2l0aCIsImJ1aWxkSGllcmFyY2h5IiwiX2J1aWxkSnNvbkRTIiwiY2hpbGRyZW4iLCJzcGlubmVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiX2dldEpTT04iLCJyZXNwIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJfY2xpY2tDaGFydCIsImJpbmQiLCJkb3dubG9hZEJ0biIsImV4cG9ydEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2xpY2tFeHBvcnRCdXR0b24iLCJfb25QYW5TdGFydCIsIl9vblBhbkVuZCIsIl9vbldoZWVsaW5nIiwiX29uVG91Y2hTdGFydCIsImJvZHkiLCJfb25Ub3VjaEVuZCIsIm5ld1ZhbCIsImVsIiwiZm4iLCJmaWx0ZXIiLCJjaGlsZCIsImV4cHIiLCJtYXRjaGVzIiwic2licyIsInByZXZTaWIiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicHVzaCIsIm5leHRTaWIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJvZmZzZXRQYXJlbnQiLCJlbGVtZW50cyIsImNsYXNzTmFtZXMiLCJmb3JFYWNoIiwiaW5kZXhPZiIsInNwbGl0IiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwicHJvcCIsInZhbCIsInN0eWxlIiwiYXR0ciIsInJlbW92ZUF0dHJpYnV0ZSIsIm9uZSIsImV2ZW50IiwibGlzdGVuZXIiLCJzZWxmIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJhbmNlc3RvcnMiLCJyZXN1bHRzIiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VsZWN0b3IiLCJ1cmwiLCJyZWplY3QiLCJoYW5kbGVyIiwicmVhZHlTdGF0ZSIsInJlc3BvbnNlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZXNwb25zZVR5cGUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInN1Yk9iaiIsIm5hbWUiLCJsaSIsImZpcnN0Q2hpbGQiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJyZWxhdGlvbnNoaXAiLCJub2RlTmFtZSIsImxlbmd0aCIsImlkIiwiQXJyYXkiLCJmcm9tIiwiZmxhZ3MiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiaXRlbSIsIl9pdGVyYXRvciIsInJldHVybiIsIm5vZGUiLCJvZmZzZXRXaWR0aCIsImNyaXRlcmlhIiwic3RhdGUiLCJleGlzdCIsInZpc2libGUiLCJyZWxhdGlvbiIsIl9jbG9zZXN0IiwiY29udGFpbnMiLCJFcnJvciIsIl9pc1Zpc2libGUiLCJzdGF0dXNUZXh0Iiwib3BlbiIsIl9zaWJsaW5ncyIsInNvbWUiLCJfdGhpczMiLCJsYXN0Q2hpbGQiLCJtYXAiLCJsZWZ0RWRnZSIsInJpZ2h0RWRnZSIsInRlbXAiLCJzaWJsaW5nc0xvYWRlZCIsInNpYnNWaXNpYmxlIiwidG9nZ2xlIiwidGFyZ2V0IiwiZmxhZyIsInRvcEVkZ2UiLCJib3R0b21FZGdlIiwiX2dldE5vZGVTdGF0ZSIsImN1cnJlbnRUYXJnZXQiLCJmb2N1c2VkTm9kZSIsIm5vZGVEYXRhIiwidGFibGUiLCJfY3JlYXRlTm9kZSIsIm5vZGVEaXYiLCJwYXJlbnRUciIsInN1cGVyaW9yTGluZSIsImluZmVyaW9yTGluZSIsImNoaWxkcmVuVHIiLCJpbnNlcnRCZWZvcmUiLCJhcnJvdyIsIl9wcmV2QWxsIiwiX3JlbW92ZUNsYXNzIiwic2xpY2UiLCJwYXJlbnQiLCJfb25lIiwic2libGluZ3MiLCJfbmV4dEFsbCIsInVwcGVyTGV2ZWwiLCJzaWIiLCJfdGhpczUiLCJfaXNJbkFjdGlvbiIsIl9zd2l0Y2hIb3Jpem9udGFsQXJyb3ciLCJjbGlja2VkTm9kZSIsIm5vZGVDb250YWluZXIiLCJpbkFqYXgiLCJwcmVTaWJzIiwiX3RoaXM2IiwibmV4dFNpYnMiLCJhbmltYXRlZE5vZGVzIiwibGluZXMiLCJTZXQiLCJsaW5lIiwiX3RoaXM3Iiwic29tZUxpbmVzIiwiX3N3aXRjaFZlcnRpY2FsQXJyb3ciLCJfYWRkQ2xhc3MiLCJfcmVwYWludCIsImhpZGVTaWJsaW5ncyIsIl9jc3MiLCJfcmVtb3ZlQXR0ciIsImhpZGVQYXJlbnQiLCJjdXJyZW50Um9vdCIsIl9idWlsZFBhcmVudE5vZGUiLCJzaG93UGFyZW50IiwiZGlzYWJsZWQiLCJzdG9wUHJvcGFnYXRpb24iLCJwYXJlbnRTdGF0ZSIsIl9zdGFydExvYWRpbmciLCJzb3VyY2UiLCJ2aXNpYmlsaXR5IiwiYWRkUGFyZW50IiwibGFzdEl0ZW0iLCJkZXNjZW5kYW50cyIsImlzVmVydGljYWxEZXNjIiwiZGVzYyIsImdyYW5kZmF0aGVyVmlzaWJsZSIsIl90aGlzOCIsImFwcGVuZFRvIiwiaW5FZGl0IiwiY291bnQiLCJzeW1ib2wiLCJwYXJlbnROb2RlU3ltYm9sIiwic2hvd0NoaWxkcmVuIiwiY2hpbGRyZW5TdGF0ZSIsIl90aGlzOSIsImFkZENoaWxkcmVuIiwiZXhpc3RpbmdTaWJsaWdDb3VudCIsIm9uZVNpYmxpbmciLCJzaWJsaW5nQ291bnQiLCJpIiwicmlnaHRMaW5lIiwibGVmdExpbmUiLCJfdGhpczEwIiwibmV3U2libGluZ0NvdW50Iiwibm9kZUNoYXJ0IiwiaW5zZXJ0UG9zdGlvbiIsIk1hdGgiLCJmbG9vciIsImNoaWxkQ291bnQiLCJfYnVpbGRDaGlsZE5vZGUiLCJzaWJsaW5nVGRzIiwiX2dldERlc2NFbGVtZW50cyIsInRkIiwiX2NvbXBsZW1lbnRMaW5lIiwidGVtcDIiLCJ0ZW1wMyIsIl9idWlsZFNpYmxpbmdOb2RlIiwic2hvd1NpYmxpbmdzIiwiX3RoaXMxMSIsImhFZGdlIiwic2libGluZ3NTdGF0ZSIsInBhcnNlIiwiaGlkZUNoaWxkcmVuIiwiZmFtaWxpZXMiLCJfZW5kTG9hZGluZyIsInRvZ2dsZUJ0biIsImRlc2NXcmFwcGVyIiwidWwiLCJzdWJUQnMiLCJfY2xpY2tUb3BFZGdlIiwiX2NsaWNrQm90dG9tRWRnZSIsIl9jbGlja1RvZ2dsZUJ1dHRvbiIsIl9jbGlja05vZGUiLCJpc0ZpcmVmb3giLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImdob3N0Tm9kZSIsIm5vZGVDb3ZlciIsImNyZWF0ZUVsZW1lbnROUyIsInBhcnNlRmxvYXQiLCJ0cmFuc1ZhbHVlcyIsIm9mZnNldEhlaWdodCIsInNjYWxlIiwibm9kZUNvdW50IiwieU9mZnNldCIsInhPZmZzZXQiLCJvZmZzZXRZIiwiZ2hvc3ROb2RlV3JhcHBlciIsInNyYyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsImRhdGFUcmFuc2ZlciIsInNldERyYWdJbWFnZSIsImRyYWdnZWQiLCJkcmFnWm9uZSIsImRyYWdIaWVyIiwiZHJvcENyaXRlcmlhIiwiZHJvcFpvbmUiLCJkcm9wQ29sc3BhbiIsImNvbFNwYW4iLCJsZWZ0bGluZSIsInJpZ2h0bGluZSIsImRyb3BTaWJzIiwidXBwZXJUciIsImxvd2VyVHIiLCJub2RlVHIiLCJkcmFnZ2VkVGQiLCJkcmFnQ29sU3BhbiIsImFkZFNpYmxpbmdzIiwiZHJhZ1NpYnMiLCJ0ciIsImN1c3RvbUUiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRyYWdnZWROb2RlIiwiZGlzcGF0Y2hFdmVudCIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwibmV4dCIsImRvbmUiLCJpc0hpZGRlbiIsImxldmVsIiwicGFyZW50SWQiLCJub2RlQ29udGVudCIsInZlcnRpY2FsRGVwdGgiLCJOdW1iZXIiLCJfY2xpY2tIb3Jpem9udGFsRWRnZSIsImljb24iLCJzdWJzdHIiLCJ0ZXN0IiwibmF2aWdhdG9yIiwic2V0RGF0YSIsInRyYW5zZm9ybSIsInRpdGxlIiwid2luZG93IiwiX2Rpc3BhdGNoQ2xpY2tFdmVudCIsIl9vbkRyYWdPdmVyIiwiX29uRHJhZ0VuZCIsIm9mZnNldFgiLCJub2RlV3JhcHBlciIsImlzVmVydGljYWxOb2RlIiwiY2hpbGROb2RlcyIsImtleXMiLCJpc1ZlcnRpY2FsTGF5ZXIiLCJsaW5lTGF5ZXIiLCJqb2luIiwibm9kZUxheWVyIiwibm9kZUNlbGwiLCJjbG9zZXN0Tm9kZSIsInNvdXJjZUNoYXJ0IiwibWFzayIsImh0bWwyY2FudmFzIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJjYW52YXNDb250YWluZXIiLCJvdmVyZmxvdyIsImNhbnZhcyIsInRvRGF0YVVSTCIsIl90aGlzMTIiLCJfbG9vcENoYXJ0IiwidG91Y2hlcyIsInBhbm5pbmciLCJjdXJzb3IiLCJsYXN0WCIsImxhc3RZIiwibGFzdFRmIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcnNlSW50Iiwic3RhcnRYIiwic3RhcnRZIiwidGFyZ2V0VG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJwYW5TdGFydCIsIl9vblBhbm5pbmciLCJuZXdZIiwibmV3WCIsIm1hdHJpeCIsImluY2x1ZGVzIiwibmV3U2NhbGUiLCJjcmVhdGVOb2RlIiwiZGVsdGFZIiwiX3NldENoYXJ0U2NhbGUiLCJjbGllbnRYIiwiY2xpZW50WSIsImRpc3QiLCJwaW5jaGluZyIsInBpbmNoRGlzdEVuZCIsImRpZmYiLCJwaW5jaERpc3RTdGFydCIsIkhUTUxFbGVtZW50Il0sIm1hcHBpbmdzIjoiOHdDQUFxQkEscUJBQ25CLFFBQUFBLEdBQVlDLEdBQVNDLGdCQUFBQyxLQUFBSCxFQUFBLElBQUFJLEdBQUFDLDJCQUFBRixNQUFBSCxFQUFBTSxXQUFBQyxPQUFBQyxlQUFBUixJQUFBUyxLQUFBTixPQUlmTyxFQUFhTixFQUFLTyxjQUFjQyxLQUFNLFFBRTFDRixHQUFXRyxVQUFYLGtEQUlBQyxRQUFRQyxVQUFVQyxRQUFVLFNBQVVDLEdBQ3BDLEdBQUlDLEdBQUlmLEtBQUtnQixXQUViLE9BQU9oQixNQUFLaUIsS0FDVixTQUFBQyxHQUFBLE1BQVNILEdBQUVJLFFBQVFMLEtBQVlHLEtBQUssV0FBQSxNQUFNQyxNQUMxQyxTQUFBRSxHQUFBLE1BQVVMLEdBQUVJLFFBQVFMLEtBQVlHLEtBQUssV0FBUSxLQUFNRyxPQUl2RCxJQUFJQyxHQUFBQSxFQW5CTkMsR0FBcUJDLFVBQUEsT0FzQmZDLE9BQVUsS0FyQkxDLG9CQUFBLEVBdUJMQyxNQUFTLElBckJiQyxXQUFBLEdBSG1CQyxjQUFBLEVBMkJmQyxlQUFrQixXQXZCbEJ0QixpQkFBa0JDLFdBeUJsQnNCLFdBQWEsRUF2QmpCdkIsVUFBV0csTUF5QlBxQixLQUFPLEVBckJYcEIsTUFBUUMsR0F3Qk5vQixFQUFPNUIsT0FBTzZCLE9BQU9YLEVBQWdCeEIsR0FyQnJDb0MsRUFBT0YsRUFB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QUNkN1ksS0FBQXVZLGVBQWdCdk4sRUFBWixHQUFzQzZOLEVBQUEsR0FDeENqRCxLQUFBQSxlQUFjbkgsR0FBZCxXQXo4QzhCc0ssNkJBQWpCbFoiLCJmaWxlIjoib3JnY2hhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JnQ2hhcnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpOyAvLyBhbHdheXMgY2FsbCBzdXBlcigpIGZpcnN0IGluIHRoZSBjdG9yLlxuXG4gICAgLy8gQXR0YWNoIGEgc2hhZG93IHJvb3QgdG8gdGhlIGVsZW1lbnQuXG4gICAgbGV0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSk7XG5cbiAgICBzaGFkb3dSb290LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJvYy1jb250YWluZXJcIj4gPC9kaXY+XG4gICAgYDtcblxuICAgIFByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGxldCBQID0gdGhpcy5jb25zdHJ1Y3RvcjtcblxuICAgICAgcmV0dXJuIHRoaXMudGhlbihcbiAgICAgICAgdmFsdWUgPT4gUC5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oKCkgPT4gdmFsdWUpLFxuICAgICAgICByZWFzb24gPT4gUC5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oKCkgPT4geyB0aHJvdyByZWFzb247IH0pXG4gICAgICApO1xuICAgIH07XG5cbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgJ25vZGVUaXRsZSc6ICduYW1lJyxcbiAgICAgICAgJ25vZGVJZCc6ICdpZCcsXG4gICAgICAgICd0b2dnbGVTaWJsaW5nc1Jlc3AnOiBmYWxzZSxcbiAgICAgICAgJ2RlcHRoJzogOTk5LFxuICAgICAgICAnY2hhcnRDbGFzcyc6ICcnLFxuICAgICAgICAnZXhwb3J0QnV0dG9uJzogZmFsc2UsXG4gICAgICAgICdleHBvcnRGaWxlbmFtZSc6ICdPcmdDaGFydCcsXG4gICAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcbiAgICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxuICAgICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXG4gICAgICAgICdwYW4nOiBmYWxzZSxcbiAgICAgICAgJ3pvb20nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKSxcbiAgICAgIGRhdGEgPSBvcHRzLmRhdGEsXG4gICAgICBjaGFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgY2hhcnRDb250YWluZXIgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLm9jLWNvbnRhaW5lcicpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0cztcbiAgICBkZWxldGUgdGhpcy5vcHRpb25zLmRhdGE7XG4gICAgdGhpcy5jaGFydCA9IGNoYXJ0O1xuICAgIHRoaXMuY2hhcnRDb250YWluZXIgPSBjaGFydENvbnRhaW5lcjtcbiAgICBjaGFydC5kYXRhc2V0Lm9wdGlvbnMgPSBKU09OLnN0cmluZ2lmeShvcHRzKTtcbiAgICBjaGFydC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ29yZ2NoYXJ0JyArIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgb3B0cy5jaGFydENsYXNzIDogJycpICtcbiAgICAgIChvcHRzLmRpcmVjdGlvbiAhPT0gJ3QyYicgPyAnICcgKyBvcHRzLmRpcmVjdGlvbiA6ICcnKSk7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JykgeyAvLyBsb2NhbCBqc29uIGRhdGFzb3VyY2VcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoY2hhcnQsIG9wdHMuYWpheFVSTCA/IGRhdGEgOiB0aGlzLl9hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDApO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmIGRhdGEuc3RhcnRzV2l0aCgnIycpKSB7IC8vIHVsIGRhdGFzb3VyY2VcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoY2hhcnQsIHRoaXMuX2J1aWxkSnNvbkRTKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YSkuY2hpbGRyZW5bMF0pLCAwKTtcbiAgICB9IGVsc2UgeyAvLyBhamF4IGRhdGFzb3VyY2VcbiAgICAgIGxldCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICBzcGlubmVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyJyk7XG4gICAgICBjaGFydC5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIHRoaXMuX2dldEpTT04oZGF0YSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoY2hhcnQsIG9wdHMuYWpheFVSTCA/IHJlc3AgOiB0aGF0Ll9hdHRhY2hSZWwocmVzcCwgJzAwJyksIDApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZhaWxlZCB0byBmZXRjaCBkYXRhc291cmNlIGZvciBvcmdjaGFydCcsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgc3Bpbm5lciA9IGNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJyk7XG5cbiAgICAgICAgc3Bpbm5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNwaW5uZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tDaGFydC5iaW5kKHRoaXMpKTtcbiAgICAvLyBhcHBlbmQgdGhlIGV4cG9ydCBidXR0b24gdG8gdGhlIGNoYXJ0LWNvbnRhaW5lclxuICAgIGlmIChvcHRzLmV4cG9ydEJ1dHRvbiAmJiAhY2hhcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm9jLWV4cG9ydC1idG4nKSkge1xuICAgICAgbGV0IGV4cG9ydEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpLFxuICAgICAgICBkb3dubG9hZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuICAgICAgZXhwb3J0QnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnb2MtZXhwb3J0LWJ0bicgKyAob3B0cy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIG9wdHMuY2hhcnRDbGFzcyA6ICcnKSk7XG4gICAgICBleHBvcnRCdG4uaW5uZXJIVE1MID0gJ0V4cG9ydCc7XG4gICAgICBleHBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0V4cG9ydEJ1dHRvbi5iaW5kKHRoaXMpKTtcbiAgICAgIGRvd25sb2FkQnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnb2MtZG93bmxvYWQtYnRuJyArIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgb3B0cy5jaGFydENsYXNzIDogJycpKTtcbiAgICAgIGRvd25sb2FkQnRuLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBvcHRzLmV4cG9ydEZpbGVuYW1lICsgJy5wbmcnKTtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGV4cG9ydEJ0bik7XG4gICAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChkb3dubG9hZEJ0bik7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMucGFuKSB7XG4gICAgICBjaGFydENvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgY2hhcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fb25QYW5TdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblBhblN0YXJ0LmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25QYW5FbmQuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25QYW5FbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuem9vbSkge1xuICAgICAgY2hhcnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLl9vbldoZWVsaW5nLmJpbmQodGhpcykpO1xuICAgICAgY2hhcnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChjaGFydCk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG5cbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcblxuICB9XG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyTmFtZSwgb2xkVmFsLCBuZXdWYWwpIHtcblxuICB9XG5cbiAgX2Nsb3Nlc3QoZWwsIGZuKSB7XG4gICAgcmV0dXJuIGVsICYmICgoZm4oZWwpICYmIGVsICE9PSB0aGlzLmNoYXJ0KSA/IGVsIDogdGhpcy5fY2xvc2VzdChlbC5wYXJlbnROb2RlLCBmbikpO1xuICB9XG4gIF9zaWJsaW5ncyhlbCwgZXhwcikge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsLnBhcmVudE5vZGUuY2hpbGRyZW4pLmZpbHRlcigoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZCAhPT0gZWwpIHtcbiAgICAgICAgaWYgKGV4cHIpIHtcbiAgICAgICAgICByZXR1cm4gZWwubWF0Y2hlcyhleHByKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBfcHJldkFsbChlbCwgZXhwcikge1xuICAgIGxldCBzaWJzID0gW10sXG4gICAgICBwcmV2U2liID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIHdoaWxlIChwcmV2U2liKSB7XG4gICAgICBpZiAoIWV4cHIgfHwgcHJldlNpYi5tYXRjaGVzKGV4cHIpKSB7XG4gICAgICAgIHNpYnMucHVzaChwcmV2U2liKTtcbiAgICAgIH1cbiAgICAgIHByZXZTaWIgPSBwcmV2U2liLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiBzaWJzO1xuICB9XG4gIF9uZXh0QWxsKGVsLCBleHByKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICBsZXQgbmV4dFNpYiA9IGVsLm5leHRFbGVtZW50U2libGluZztcblxuICAgIHdoaWxlIChuZXh0U2liKSB7XG4gICAgICBpZiAoIWV4cHIgfHwgbmV4dFNpYi5tYXRjaGVzKGV4cHIpKSB7XG4gICAgICAgIHNpYnMucHVzaChuZXh0U2liKTtcbiAgICAgIH1cbiAgICAgIG5leHRTaWIgPSBuZXh0U2liLm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIHNpYnM7XG4gIH1cbiAgX2lzVmlzaWJsZShlbCkge1xuICAgIHJldHVybiBlbC5vZmZzZXRQYXJlbnQgIT09IG51bGw7XG4gIH1cbiAgX2FkZENsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWVzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWVzLmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX3JlbW92ZUNsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWVzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWVzLmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX2NzcyhlbGVtZW50cywgcHJvcCwgdmFsKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnN0eWxlW3Byb3BdID0gdmFsO1xuICAgIH0pO1xuICB9XG4gIF9yZW1vdmVBdHRyKGVsZW1lbnRzLCBhdHRyKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9KTtcbiAgfVxuICBfb25lKGVsLCB0eXBlLCBsaXN0ZW5lciwgc2VsZikge1xuICAgIGxldCBvbmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwoc2VsZiwgZXZlbnQpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIG9uZSk7XG4gIH1cbiAgX2dldERlc2NFbGVtZW50cyhhbmNlc3RvcnMsIHNlbGVjdG9yKSB7XG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcblxuICAgIGFuY2VzdG9ycy5mb3JFYWNoKChlbCkgPT4gcmVzdWx0cy5wdXNoKC4uLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbiAgX2dldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0aGlzLnN0YXR1c1RleHQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAvLyB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9KTtcbiAgfVxuICBfYnVpbGRKc29uRFMobGkpIHtcbiAgICBsZXQgc3ViT2JqID0ge1xuICAgICAgJ25hbWUnOiBsaS5maXJzdENoaWxkLnRleHRDb250ZW50LnRyaW0oKSxcbiAgICAgICdyZWxhdGlvbnNoaXAnOiAobGkucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnTEknID8gJzEnIDogJzAnKSArXG4gICAgICAgIChsaS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCA+IDEgPyAxIDogMCkgKyAobGkuY2hpbGRyZW4ubGVuZ3RoID8gMSA6IDApXG4gICAgfTtcblxuICAgIGlmIChsaS5pZCkge1xuICAgICAgc3ViT2JqLmlkID0gbGkuaWQ7XG4gICAgfVxuICAgIGlmIChsaS5xdWVyeVNlbGVjdG9yKCd1bCcpKSB7XG4gICAgICBBcnJheS5mcm9tKGxpLnF1ZXJ5U2VsZWN0b3IoJ3VsJykuY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoaXMuX2J1aWxkSnNvbkRTKGVsKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1Yk9iajtcbiAgfVxuICBfYXR0YWNoUmVsKGRhdGEsIGZsYWdzKSB7XG4gICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgZm9yIChsZXQgaXRlbSBvZiBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIHRoaXMuX2F0dGFjaFJlbChpdGVtLCAnMScgKyAoZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgX3JlcGFpbnQobm9kZSkge1xuICAgIGlmIChub2RlKSB7XG4gICAgICBub2RlLnN0eWxlLm9mZnNldFdpZHRoID0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICB9XG4gIH1cbiAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcbiAgX2lzSW5BY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5lZGdlJykuY2xhc3NOYW1lLmluZGV4T2YoJ2ZhLScpID4gLTE7XG4gIH1cbiAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICBfZ2V0Tm9kZVN0YXRlKG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgbGV0IGNyaXRlcmlhLFxuICAgICAgc3RhdGUgPSB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG5cbiAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICBjcml0ZXJpYSA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKTtcbiAgICAgIGlmIChjcml0ZXJpYSkge1xuICAgICAgICBzdGF0ZS5leGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZXhpc3QgJiYgdGhpcy5faXNWaXNpYmxlKGNyaXRlcmlhLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0pKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIGNyaXRlcmlhID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVFInKS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAoY3JpdGVyaWEpIHtcbiAgICAgICAgc3RhdGUuZXhpc3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmV4aXN0ICYmIHRoaXMuX2lzVmlzaWJsZShjcml0ZXJpYSkpIHtcbiAgICAgICAgc3RhdGUudmlzaWJsZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgY3JpdGVyaWEgPSB0aGlzLl9zaWJsaW5ncyh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUpO1xuICAgICAgaWYgKGNyaXRlcmlhLmxlbmd0aCkge1xuICAgICAgICBzdGF0ZS5leGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZXhpc3QgJiYgY3JpdGVyaWEuc29tZSgoZWwpID0+IHRoaXMuX2lzVmlzaWJsZShlbCkpKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gIGdldFJlbGF0ZWROb2Rlcyhub2RlLCByZWxhdGlvbikge1xuICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAucGFyZW50Tm9kZS5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykubGFzdENoaWxkLmNoaWxkcmVuKVxuICAgICAgICAubWFwKChlbCkgPT4gZWwucXVlcnlTZWxlY3RvcignLm5vZGUnKSk7XG4gICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NpYmxpbmdzKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZSlcbiAgICAgICAgLm1hcCgoZWwpID0+IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykpO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbiAgX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKSB7XG4gICAgbGV0IG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBsZWZ0RWRnZSA9IG5vZGUucXVlcnlTZWxlY3RvcignLmxlZnRFZGdlJyksXG4gICAgICByaWdodEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodEVkZ2UnKSxcbiAgICAgIHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGU7XG5cbiAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3AgJiYgKHR5cGVvZiBvcHRzLmFqYXhVUkwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCcubm9kZXMnKSkuZGF0YXNldC5zaWJsaW5nc0xvYWRlZCkpIHtcbiAgICAgIGxldCBwcmV2U2liID0gdGVtcC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLFxuICAgICAgICBuZXh0U2liID0gdGVtcC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgIGlmIChwcmV2U2liKSB7XG4gICAgICAgIGlmIChwcmV2U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QuYWRkKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LmFkZCgnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobmV4dFNpYikge1xuICAgICAgICBpZiAobmV4dFNpYi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHNpYnMgPSB0aGlzLl9zaWJsaW5ncyh0ZW1wKSxcbiAgICAgICAgc2lic1Zpc2libGUgPSBzaWJzLmxlbmd0aCA/ICFzaWJzLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSA6IGZhbHNlO1xuXG4gICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXJpZ2h0Jywgc2lic1Zpc2libGUpO1xuICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLWxlZnQnLCBzaWJzVmlzaWJsZSk7XG4gICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1yaWdodCcsICFzaWJzVmlzaWJsZSk7XG4gICAgfVxuICB9XG4gIF9ob3Zlck5vZGUoZXZlbnQpIHtcbiAgICBsZXQgbm9kZSA9IGV2ZW50LnRhcmdldCxcbiAgICAgIGZsYWcgPSBmYWxzZSxcbiAgICAgIHRvcEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC50b3BFZGdlJyksXG4gICAgICBib3R0b21FZGdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuYm90dG9tRWRnZScpLFxuICAgICAgbGVmdEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5sZWZ0RWRnZScpO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgaWYgKHRvcEVkZ2UpIHtcbiAgICAgICAgZmxhZyA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgICAgdG9wRWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXVwJywgIWZsYWcpO1xuICAgICAgICB0b3BFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tZG93bicsIGZsYWcpO1xuICAgICAgfVxuICAgICAgaWYgKGJvdHRvbUVkZ2UpIHtcbiAgICAgICAgZmxhZyA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnY2hpbGRyZW4nKS52aXNpYmxlO1xuICAgICAgICBib3R0b21FZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tZG93bicsICFmbGFnKTtcbiAgICAgICAgYm90dG9tRWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XG4gICAgICB9XG4gICAgICBpZiAobGVmdEVkZ2UpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoSG9yaXpvbnRhbEFycm93KG5vZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLmVkZ2UnKSkuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi11cCcsICdmYS1jaGV2cm9uLWRvd24nLCAnZmEtY2hldnJvbi1yaWdodCcsICdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvLyBkZWZpbmUgbm9kZSBjbGljayBldmVudCBoYW5kbGVyXG4gIF9jbGlja05vZGUoZXZlbnQpIHtcbiAgICBsZXQgY2xpY2tlZE5vZGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgZm9jdXNlZE5vZGUgPSB0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5mb2N1c2VkJyk7XG5cbiAgICBpZiAoZm9jdXNlZE5vZGUpIHtcbiAgICAgIGZvY3VzZWROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQnKTtcbiAgICB9XG4gICAgY2xpY2tlZE5vZGUuY2xhc3NMaXN0LmFkZCgnZm9jdXNlZCcpO1xuICB9XG4gIC8vIGJ1aWxkIHRoZSBwYXJlbnQgbm9kZSBvZiBzcGVjaWZpYyBub2RlXG4gIF9idWlsZFBhcmVudE5vZGUoY3VycmVudFJvb3QsIG5vZGVEYXRhLCBjYWxsYmFjaykge1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcblxuICAgIG5vZGVEYXRhLnJlbGF0aW9uc2hpcCA9ICcwMDEnO1xuICAgIHRoaXMuX2NyZWF0ZU5vZGUobm9kZURhdGEsIDApXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZURpdikge1xuICAgICAgICBsZXQgY2hhcnQgPSB0aGF0LmNoYXJ0O1xuXG4gICAgICAgIG5vZGVEaXYuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtdXAnKTtcbiAgICAgICAgbm9kZURpdi5jbGFzc0xpc3QuYWRkKCdzbGlkZS1kb3duJyk7XG4gICAgICAgIGxldCBwYXJlbnRUciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksXG4gICAgICAgICAgc3VwZXJpb3JMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgICBpbmZlcmlvckxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICAgIGNoaWxkcmVuVHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgIHBhcmVudFRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnaGlkZGVuJyk7XG4gICAgICAgIHBhcmVudFRyLmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj1cIjJcIj48L3RkPmA7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHBhcmVudFRyKTtcbiAgICAgICAgc3VwZXJpb3JMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMgaGlkZGVuJyk7XG4gICAgICAgIHN1cGVyaW9yTGluZS5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD5gO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChzdXBlcmlvckxpbmUpO1xuICAgICAgICBpbmZlcmlvckxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcyBoaWRkZW4nKTtcbiAgICAgICAgaW5mZXJpb3JMaW5lLmlubmVySFRNTCA9IGA8dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD5gO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChpbmZlcmlvckxpbmUpO1xuICAgICAgICBjaGlsZHJlblRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm9kZXMnKTtcbiAgICAgICAgY2hpbGRyZW5Uci5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49XCIyXCI+PC90ZD5gO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChjaGlsZHJlblRyKTtcbiAgICAgICAgdGFibGUucXVlcnlTZWxlY3RvcigndGQnKS5hcHBlbmRDaGlsZChub2RlRGl2KTtcbiAgICAgICAgY2hhcnQuaW5zZXJ0QmVmb3JlKHRhYmxlLCBjaGFydC5jaGlsZHJlblswXSk7XG4gICAgICAgIHRhYmxlLmNoaWxkcmVuWzNdLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKGNoYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBwYXJlbnQgbm9kZScsIGVycik7XG4gICAgICB9KTtcbiAgfVxuICBfc3dpdGNoVmVydGljYWxBcnJvdyhhcnJvdykge1xuICAgIGFycm93LmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tdXAnKTtcbiAgICBhcnJvdy5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgfVxuICAvLyBzaG93IHRoZSBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgc2hvd1BhcmVudChub2RlKSB7XG4gICAgLy8ganVzdCBzaG93IG9ubHkgb25lIHN1cGVyaW9yIGxldmVsXG4gICAgbGV0IHRlbXAgPSB0aGlzLl9wcmV2QWxsKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJykpKTtcblxuICAgIHRoaXMuX3JlbW92ZUNsYXNzKHRlbXAsICdoaWRkZW4nKTtcbiAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgbGluZVxuICAgIHRoaXMuX2FkZENsYXNzKEFycmF5KHRlbXBbMF0uY2hpbGRyZW4pLnNsaWNlKDEsIC0xKSwgJ2hpZGRlbicpO1xuICAgIC8vIHNob3cgcGFyZW50IG5vZGUgd2l0aCBhbmltYXRpb25cbiAgICBsZXQgcGFyZW50ID0gdGVtcFsyXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuXG4gICAgdGhpcy5fb25lKHBhcmVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUnKTtcbiAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaFZlcnRpY2FsQXJyb3cobm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAudG9wRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgICB0aGlzLl9yZXBhaW50KHBhcmVudCk7XG4gICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoJ3NsaWRlJyk7XG4gICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLWRvd24nKTtcbiAgfVxuICAvLyBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICBzaG93U2libGluZ3Mobm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgLy8gZmlyc3RseSwgc2hvdyB0aGUgc2libGluZyB0ZCB0YWdzXG4gICAgbGV0IHNpYmxpbmdzID0gW10sXG4gICAgICB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlO1xuXG4gICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgc2libGluZ3MgPSBkaXJlY3Rpb24gPT09ICdsZWZ0JyA/IHRoaXMuX3ByZXZBbGwodGVtcCkgOiB0aGlzLl9uZXh0QWxsKHRlbXApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5ncyA9IHRoaXMuX3NpYmxpbmdzKHRlbXApO1xuICAgIH1cbiAgICB0aGlzLl9yZW1vdmVDbGFzcyhzaWJsaW5ncywgJ2hpZGRlbicpO1xuICAgIC8vIHNlY29uZGx5LCBzaG93IHRoZSBsaW5lc1xuICAgIGxldCB1cHBlckxldmVsID0gdGhpcy5fcHJldkFsbCh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKSk7XG5cbiAgICB0ZW1wID0gQXJyYXkuZnJvbSh1cHBlckxldmVsWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC5oaWRkZW4nKSk7XG4gICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3ModGVtcC5zbGljZSgwLCBzaWJsaW5ncy5sZW5ndGggKiAyKSwgJ2hpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgfVxuICAgIC8vIHRoaXJkbHksIGRvIHNvbWUgY2xlYW5pbmcgc3R1ZmZcbiAgICBpZiAoIXRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JykudmlzaWJsZSkge1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3ModXBwZXJMZXZlbCwgJ2hpZGRlbicpO1xuICAgICAgbGV0IHBhcmVudCA9IHVwcGVyTGV2ZWxbMl0ucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcblxuICAgICAgdGhpcy5fb25lKHBhcmVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlJyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHRoaXMuX3JlcGFpbnQocGFyZW50KTtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZScpO1xuICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLWRvd24nKTtcbiAgICB9XG4gICAgLy8gbGFzdGx5LCBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIHdpdGggYW5pbWF0aW9uXG4gICAgc2libGluZ3MuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9pc1Zpc2libGUobm9kZSkpIHtcbiAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlJyk7XG4gICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1sZWZ0JywgJ3NsaWRlLXJpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX29uZShzaWJsaW5nc1swXS5xdWVyeVNlbGVjdG9yKCcuc2xpZGUnKSwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaWJsaW5ncy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3MoQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlJykpLCAnc2xpZGUnKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoSG9yaXpvbnRhbEFycm93KG5vZGUpO1xuICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJy50b3BFZGdlJykuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi11cCcpO1xuICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJy50b3BFZGdlJykuY2xhc3NMaXN0LmFkZCgnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH1cbiAgLy8gaGlkZSB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgaGlkZVNpYmxpbmdzKG5vZGUsIGRpcmVjdGlvbikge1xuICAgIGxldCBub2RlQ29udGFpbmVyID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlLFxuICAgICAgc2libGluZ3MgPSB0aGlzLl9zaWJsaW5ncyhub2RlQ29udGFpbmVyKTtcblxuICAgIHNpYmxpbmdzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgaWYgKHNpYi5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpKSB7XG4gICAgICAgIHRoaXMuY2hhcnQuZGF0YXNldC5pbkFqYXggPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghZGlyZWN0aW9uIHx8IChkaXJlY3Rpb24gJiYgZGlyZWN0aW9uID09PSAnbGVmdCcpKSB7XG4gICAgICBsZXQgcHJlU2licyA9IHRoaXMuX3ByZXZBbGwobm9kZUNvbnRhaW5lcik7XG5cbiAgICAgIHByZVNpYnMuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5faXNWaXNpYmxlKG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlJywgJ3NsaWRlLXJpZ2h0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWRpcmVjdGlvbiB8fCAoZGlyZWN0aW9uICYmIGRpcmVjdGlvbiAhPT0gJ2xlZnQnKSkge1xuICAgICAgbGV0IG5leHRTaWJzID0gdGhpcy5fbmV4dEFsbChub2RlQ29udGFpbmVyKTtcblxuICAgICAgbmV4dFNpYnMuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5faXNWaXNpYmxlKG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlJywgJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGFuaW1hdGVkTm9kZXMgPSBbXTtcblxuICAgIHRoaXMuX3NpYmxpbmdzKG5vZGVDb250YWluZXIpLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYW5pbWF0ZWROb2RlcywgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlJykpKTtcbiAgICB9KTtcbiAgICBsZXQgbGluZXMgPSBbXTtcblxuICAgIGZvciAobGV0IG5vZGUgb2YgYW5pbWF0ZWROb2Rlcykge1xuICAgICAgbGV0IHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgbGluZXMucHVzaCh0ZW1wKTtcbiAgICAgIGxpbmVzLnB1c2godGVtcC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgbGluZXMgPSBbLi4ubmV3IFNldChsaW5lcyldO1xuICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIGxpbmUuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fb25lKGFuaW1hdGVkTm9kZXNbMF0sICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIGxpbmUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfSk7XG4gICAgICBsZXQgc2licyA9IFtdO1xuXG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgIHNpYnMgPSB0aGlzLl9wcmV2QWxsKG5vZGVDb250YWluZXIsICc6bm90KC5oaWRkZW4pJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2licyA9IHRoaXMuX25leHRBbGwobm9kZUNvbnRhaW5lciwgJzpub3QoLmhpZGRlbiknKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2licyA9IHRoaXMuX3NpYmxpbmdzKG5vZGVDb250YWluZXIpO1xuICAgICAgfVxuICAgICAgbGV0IHRlbXAgPSBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3Qobm9kZUNvbnRhaW5lciwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgICB9KS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IDpub3QoLmhpZGRlbiknKSk7XG5cbiAgICAgIGxldCBzb21lTGluZXMgPSB0ZW1wLnNsaWNlKDEsIGRpcmVjdGlvbiA/IHNpYnMubGVuZ3RoICogMiArIDEgOiAtMSk7XG5cbiAgICAgIHRoaXMuX2FkZENsYXNzKHNvbWVMaW5lcywgJ2hpZGRlbicpO1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3MoYW5pbWF0ZWROb2RlcywgJ3NsaWRlJyk7XG4gICAgICBzaWJzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5zbGljZSgxKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzVmlzaWJsZShub2RlKSkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1sZWZ0JywgJ3NsaWRlLXJpZ2h0Jyk7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLXVwJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgc2licy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLmxpbmVzJykpLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlcycpKSwgJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyhBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcudmVydGljYWxOb2RlcycpKSwgJ2hpZGRlbicpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9hZGRDbGFzcyhzaWJzLCAnaGlkZGVuJyk7XG5cbiAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfVxuICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBhbmNlc3RvciBub2RlIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICBoaWRlUGFyZW50KG5vZGUpIHtcbiAgICBsZXQgdGVtcCA9IEFycmF5LmZyb20odGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgfSkucGFyZW50Tm9kZS5jaGlsZHJlbikuc2xpY2UoMCwgMyk7XG5cbiAgICBpZiAodGVtcFswXS5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpKSB7XG4gICAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5BamF4ID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXNcbiAgICBpZiAodGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcbiAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUpO1xuICAgIH1cbiAgICAvLyBoaWRlIHRoZSBsaW5lc1xuICAgIGxldCBsaW5lcyA9IHRlbXAuc2xpY2UoMSk7XG5cbiAgICB0aGlzLl9jc3MobGluZXMsICd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgIC8vIGhpZGUgdGhlIHN1cGVyaW9yIG5vZGVzIHdpdGggdHJhbnNpdGlvblxuICAgIGxldCBwYXJlbnQgPSB0ZW1wWzBdLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyksXG4gICAgICBncmFuZGZhdGhlclZpc2libGUgPSB0aGlzLl9nZXROb2RlU3RhdGUocGFyZW50LCAncGFyZW50JykudmlzaWJsZTtcblxuICAgIGlmIChwYXJlbnQgJiYgdGhpcy5faXNWaXNpYmxlKHBhcmVudCkpIHtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZScsICdzbGlkZS1kb3duJyk7XG4gICAgICB0aGlzLl9vbmUocGFyZW50LCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlJyk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUF0dHIobGluZXMsICdzdHlsZScpO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBoYXMgdGhlIHBhcmVudCBub2RlLCBoaWRlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgaWYgKHBhcmVudCAmJiBncmFuZGZhdGhlclZpc2libGUpIHtcbiAgICAgIHRoaXMuaGlkZVBhcmVudChwYXJlbnQpO1xuICAgIH1cbiAgfVxuICAvLyBleHBvc2VkIG1ldGhvZFxuICBhZGRQYXJlbnQoY3VycmVudFJvb3QsIGRhdGEpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLl9idWlsZFBhcmVudE5vZGUoY3VycmVudFJvb3QsIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghY3VycmVudFJvb3QucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRvcEVkZ2UnKSkge1xuICAgICAgICBsZXQgdG9wRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICB0b3BFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYScpO1xuICAgICAgICBjdXJyZW50Um9vdC5hcHBlbmRDaGlsZCh0b3BFZGdlKTtcbiAgICAgIH1cbiAgICAgIHRoYXQuc2hvd1BhcmVudChjdXJyZW50Um9vdCk7XG4gICAgfSk7XG4gIH1cbiAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gIF9zdGFydExvYWRpbmcoYXJyb3csIG5vZGUpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGNoYXJ0ID0gdGhpcy5jaGFydDtcblxuICAgIGlmICh0eXBlb2YgY2hhcnQuZGF0YXNldC5pbkFqYXggIT09ICd1bmRlZmluZWQnICYmIGNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBsZXQgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgIHNwaW5uZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXInKTtcbiAgICBub2RlLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20obm9kZS5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAqOm5vdCguc3Bpbm5lciknKSksICdoYXp5Jyk7XG4gICAgY2hhcnQuZGF0YXNldC5pbkFqYXggPSB0cnVlO1xuXG4gICAgbGV0IGV4cG9ydEJ0biA9IHRoaXMuY2hhcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm9jLWV4cG9ydC1idG4nICtcbiAgICAgIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0cy5jaGFydENsYXNzIDogJycpKTtcblxuICAgIGlmIChleHBvcnRCdG4pIHtcbiAgICAgIGV4cG9ydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgX2VuZExvYWRpbmcoYXJyb3csIG5vZGUpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAgIGFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICB0aGlzLl9yZW1vdmVDbGFzcyhBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLmhhenknKSksICdoYXp5Jyk7XG4gICAgdGhpcy5jaGFydC5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgIGxldCBleHBvcnRCdG4gPSB0aGlzLmNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vYy1leHBvcnQtYnRuJyArXG4gICAgICAob3B0cy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIG9wdHMuY2hhcnRDbGFzcyA6ICcnKSk7XG5cbiAgICBpZiAoZXhwb3J0QnRuKSB7XG4gICAgICBleHBvcnRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gZGVmaW5lIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSB0b3AgZWRnZVxuICBfY2xpY2tUb3BFZGdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdG9wRWRnZSA9IGV2ZW50LnRhcmdldCxcbiAgICAgIG5vZGUgPSB0b3BFZGdlLnBhcmVudE5vZGUsXG4gICAgICBwYXJlbnRTdGF0ZSA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JyksXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgICB9KTtcbiAgICAgIGxldCBwYXJlbnQgPSB0ZW1wLnBhcmVudE5vZGUuZmlyc3RDaGlsZC5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuXG4gICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKSkgeyByZXR1cm47IH1cbiAgICAgIC8vIGhpZGUgdGhlIGFuY2VzdG9yIG5vZGVzIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgaWYgKHBhcmVudFN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlUGFyZW50KG5vZGUpO1xuICAgICAgICB0aGlzLl9vbmUocGFyZW50LCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICAgICAgdGhpcy5fc3dpdGNoVmVydGljYWxBcnJvdyh0b3BFZGdlKTtcbiAgICAgICAgICAgIHRoaXMuX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgYW5jZXN0b3JzIGFuZCBzaWJsaW5nc1xuICAgICAgICB0aGlzLnNob3dQYXJlbnQobm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxvYWQgdGhlIG5ldyBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICBsZXQgbm9kZUlkID0gdG9wRWRnZS5wYXJlbnROb2RlLmlkO1xuXG4gICAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1c1xuICAgICAgaWYgKHRoaXMuX3N0YXJ0TG9hZGluZyh0b3BFZGdlLCBub2RlKSkge1xuICAgICAgICAvLyBsb2FkIG5ldyBub2Rlc1xuICAgICAgICB0aGlzLl9nZXRKU09OKHR5cGVvZiBvcHRzLmFqYXhVUkwucGFyZW50ID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICBvcHRzLmFqYXhVUkwucGFyZW50KG5vZGUuZGF0YXNldC5zb3VyY2UpIDogb3B0cy5hamF4VVJMLnBhcmVudCArIG5vZGVJZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICBpZiAodGhhdC5jaGFydC5kYXRhc2V0LmluQWpheCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzcCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkUGFyZW50KG5vZGUsIHJlc3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHBhcmVudCBub2RlIGRhdGEuJywgZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX2VuZExvYWRpbmcodG9wRWRnZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICBoaWRlQ2hpbGRyZW4obm9kZSkge1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIHRlbXAgPSB0aGlzLl9uZXh0QWxsKG5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKSxcbiAgICAgIGxhc3RJdGVtID0gdGVtcFt0ZW1wLmxlbmd0aCAtIDFdLFxuICAgICAgbGluZXMgPSBbXTtcblxuICAgIGlmIChsYXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpKSB7XG4gICAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5BamF4ID0gZmFsc2U7XG4gICAgfVxuICAgIGxldCBkZXNjZW5kYW50cyA9IEFycmF5LmZyb20obGFzdEl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZmlsdGVyKChlbCkgPT4gdGhhdC5faXNWaXNpYmxlKGVsKSksXG4gICAgICBpc1ZlcnRpY2FsRGVzYyA9IGxhc3RJdGVtLmNsYXNzTGlzdC5jb250YWlucygndmVydGljYWxOb2RlcycpO1xuXG4gICAgaWYgKCFpc1ZlcnRpY2FsRGVzYykge1xuICAgICAgZGVzY2VuZGFudHMuZm9yRWFjaCgoZGVzYykgPT4ge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShsaW5lcyxcbiAgICAgICAgICB0aGF0Ll9wcmV2QWxsKHRoYXQuX2Nsb3Nlc3QoZGVzYywgKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJykpLCAnLmxpbmVzJykpO1xuICAgICAgfSk7XG4gICAgICBsaW5lcyA9IFsuLi5uZXcgU2V0KGxpbmVzKV07XG4gICAgICB0aGlzLl9jc3MobGluZXMsICd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgIH1cbiAgICB0aGlzLl9vbmUoZGVzY2VuZGFudHNbMF0sICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlJyk7XG4gICAgICBpZiAoaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGluZXMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgZWwucGFyZW50Tm9kZS5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyhBcnJheS5mcm9tKGxhc3RJdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZXJ0aWNhbE5vZGVzJykpLCAnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hWZXJ0aWNhbEFycm93KG5vZGUucXVlcnlTZWxlY3RvcignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gICAgdGhpcy5fYWRkQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZSBzbGlkZS11cCcpO1xuICB9XG4gIC8vIHNob3cgdGhlIGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICBzaG93Q2hpbGRyZW4obm9kZSkge1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIHRlbXAgPSB0aGlzLl9uZXh0QWxsKG5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKSxcbiAgICAgIGRlc2NlbmRhbnRzID0gW107XG5cbiAgICB0aGlzLl9yZW1vdmVDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgaWYgKHRlbXAuc29tZSgoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygndmVydGljYWxOb2RlcycpKSkge1xuICAgICAgdGVtcC5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShkZXNjZW5kYW50cywgQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5maWx0ZXIoKGVsKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuX2lzVmlzaWJsZShlbCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBBcnJheS5mcm9tKHRlbXBbMl0uY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGRlc2NlbmRhbnRzLFxuICAgICAgICAgIEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvcigndHInKS5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5maWx0ZXIoKGVsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhhdC5faXNWaXNpYmxlKGVsKTtcbiAgICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gdGhlIHR3byBmb2xsb3dpbmcgc3RhdGVtZW50cyBhcmUgdXNlZCB0byBlbmZvcmNlIGJyb3dzZXIgdG8gcmVwYWludFxuICAgIHRoaXMuX3JlcGFpbnQoZGVzY2VuZGFudHNbMF0pO1xuICAgIHRoaXMuX29uZShkZXNjZW5kYW50c1swXSwgJ3RyYW5zaXRpb25lbmQnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUnKTtcbiAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaFZlcnRpY2FsQXJyb3cobm9kZS5xdWVyeVNlbGVjdG9yKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgICB0aGlzLl9hZGRDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlJyk7XG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZS11cCcpO1xuICB9XG4gIC8vIGJ1aWxkIHRoZSBjaGlsZCBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gIF9idWlsZENoaWxkTm9kZShhcHBlbmRUbywgbm9kZURhdGEsIGNhbGxiYWNrKSB7XG4gICAgbGV0IGRhdGEgPSBub2RlRGF0YS5jaGlsZHJlbiB8fCBub2RlRGF0YS5zaWJsaW5ncztcblxuICAgIGFwcGVuZFRvLnF1ZXJ5U2VsZWN0b3IoJ3RkJykuc2V0QXR0cmlidXRlKCdjb2xTcGFuJywgZGF0YS5sZW5ndGggKiAyKTtcbiAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KGFwcGVuZFRvLCB7ICdjaGlsZHJlbic6IGRhdGEgfSwgMCwgY2FsbGJhY2spO1xuICB9XG4gIC8vIGV4cG9zZWQgbWV0aG9kXG4gIGFkZENoaWxkcmVuKG5vZGUsIGRhdGEpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgY291bnQgPSAwO1xuXG4gICAgdGhpcy5jaGFydC5kYXRhc2V0LmluRWRpdCA9ICdhZGRDaGlsZHJlbic7XG4gICAgdGhpcy5fYnVpbGRDaGlsZE5vZGUuY2FsbCh0aGlzLCB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLCBkYXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoKytjb3VudCA9PT0gZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b21FZGdlJykpIHtcbiAgICAgICAgICBsZXQgYm90dG9tRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICAgIGJvdHRvbUVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChib3R0b21FZGdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpKSB7XG4gICAgICAgICAgbGV0IHN5bWJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICAgIHN5bWJvbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2ZhICcgKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbCcpO1xuICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRpdGxlJykuYXBwZW5kQ2hpbGQoc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dDaGlsZHJlbihub2RlKTtcbiAgICAgICAgdGhhdC5jaGFydC5kYXRhc2V0LmluRWRpdCA9ICcnO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGJvdHRvbSBlZGdlXG4gIF9jbGlja0JvdHRvbUVkZ2UoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgYm90dG9tRWRnZSA9IGV2ZW50LnRhcmdldCxcbiAgICAgIG5vZGUgPSBib3R0b21FZGdlLnBhcmVudE5vZGUsXG4gICAgICBjaGlsZHJlblN0YXRlID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdjaGlsZHJlbicpO1xuXG4gICAgaWYgKGNoaWxkcmVuU3RhdGUuZXhpc3QpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVFInO1xuICAgICAgfSkucGFyZW50Tm9kZS5sYXN0Q2hpbGQ7XG5cbiAgICAgIGlmIChBcnJheS5mcm9tKHRlbXAucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuc29tZSgobm9kZSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNWaXNpYmxlKG5vZGUpICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZScpO1xuICAgICAgfSkpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgaWYgKGNoaWxkcmVuU3RhdGUudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVDaGlsZHJlbihub2RlKTtcbiAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGRlc2NlbmRhbnRzXG4gICAgICAgIHRoaXMuc2hvd0NoaWxkcmVuKG5vZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICBsZXQgbm9kZUlkID0gYm90dG9tRWRnZS5wYXJlbnROb2RlLmlkO1xuXG4gICAgICBpZiAodGhpcy5fc3RhcnRMb2FkaW5nKGJvdHRvbUVkZ2UsIG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX2dldEpTT04odHlwZW9mIG9wdHMuYWpheFVSTC5jaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgb3B0cy5hamF4VVJMLmNoaWxkcmVuKG5vZGUuZGF0YXNldC5zb3VyY2UpIDogb3B0cy5hamF4VVJMLmNoaWxkcmVuICsgbm9kZUlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgIGlmICh0aGF0LmNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGlmIChyZXNwLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKG5vZGUsIHJlc3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGNoaWxkcmVuIG5vZGVzIGRhdGEnLCBlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC5fZW5kTG9hZGluZyhib3R0b21FZGdlLCBub2RlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIHN1YnNlcXVlbnQgcHJvY2Vzc2luZyBvZiBidWlsZCBzaWJsaW5nIG5vZGVzXG4gIF9jb21wbGVtZW50TGluZShvbmVTaWJsaW5nLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpIHtcbiAgICBsZXQgdGVtcCA9IG9uZVNpYmxpbmcucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuO1xuXG4gICAgdGVtcFswXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKTtcbiAgICB0ZW1wWzFdLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIHNpYmxpbmdDb3VudCAqIDIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdTaWJsaWdDb3VudDsgaSsrKSB7XG4gICAgICBsZXQgcmlnaHRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKSxcbiAgICAgICAgbGVmdExpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuXG4gICAgICByaWdodExpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyaWdodExpbmUgdG9wTGluZScpO1xuICAgICAgcmlnaHRMaW5lLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgdGVtcFsyXS5pbnNlcnRCZWZvcmUocmlnaHRMaW5lLCB0ZW1wWzJdLmNoaWxkcmVuWzFdKTtcbiAgICAgIGxlZnRMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGVmdExpbmUgdG9wTGluZScpO1xuICAgICAgbGVmdExpbmUuaW5uZXJIVE1MID0gJyZuYnNwOyc7XG4gICAgICB0ZW1wWzJdLmluc2VydEJlZm9yZShsZWZ0TGluZSwgdGVtcFsyXS5jaGlsZHJlblsxXSk7XG4gICAgfVxuICB9XG4gIC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgX2J1aWxkU2libGluZ05vZGUobm9kZUNoYXJ0LCBub2RlRGF0YSwgY2FsbGJhY2spIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBuZXdTaWJsaW5nQ291bnQgPSBub2RlRGF0YS5zaWJsaW5ncyA/IG5vZGVEYXRhLnNpYmxpbmdzLmxlbmd0aCA6IG5vZGVEYXRhLmNoaWxkcmVuLmxlbmd0aCxcbiAgICAgIGV4aXN0aW5nU2libGlnQ291bnQgPSBub2RlQ2hhcnQucGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gJ1REJyA/IHRoaXMuX2Nsb3Nlc3Qobm9kZUNoYXJ0LCAoZWwpID0+IHtcbiAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVFInO1xuICAgICAgfSkuY2hpbGRyZW4ubGVuZ3RoIDogMSxcbiAgICAgIHNpYmxpbmdDb3VudCA9IGV4aXN0aW5nU2libGlnQ291bnQgKyBuZXdTaWJsaW5nQ291bnQsXG4gICAgICBpbnNlcnRQb3N0aW9uID0gKHNpYmxpbmdDb3VudCA+IDEpID8gTWF0aC5mbG9vcihzaWJsaW5nQ291bnQgLyAyIC0gMSkgOiAwO1xuXG4gICAgLy8ganVzdCBidWlsZCB0aGUgc2libGluZyBub2RlcyBmb3IgdGhlIHNwZWNpZmljIG5vZGVcbiAgICBpZiAobm9kZUNoYXJ0LnBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdURCcpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fcHJldkFsbChub2RlQ2hhcnQucGFyZW50Tm9kZS5wYXJlbnROb2RlKTtcblxuICAgICAgdGVtcFswXS5yZW1vdmUoKTtcbiAgICAgIHRlbXBbMV0ucmVtb3ZlKCk7XG4gICAgICBsZXQgY2hpbGRDb3VudCA9IDA7XG5cbiAgICAgIHRoYXQuX2J1aWxkQ2hpbGROb2RlLmNhbGwodGhhdCwgdGhhdC5fY2xvc2VzdChub2RlQ2hhcnQucGFyZW50Tm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJyksXG4gICAgICAgIG5vZGVEYXRhLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKCsrY2hpbGRDb3VudCA9PT0gbmV3U2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICBsZXQgc2libGluZ1RkcyA9IEFycmF5LmZyb20odGhhdC5fY2xvc2VzdChub2RlQ2hhcnQucGFyZW50Tm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJylcbiAgICAgICAgICAgICAgLmxhc3RDaGlsZC5jaGlsZHJlbik7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NpYmxpZ0NvdW50ID4gMSkge1xuICAgICAgICAgICAgICBsZXQgdGVtcCA9IG5vZGVDaGFydC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAgICAgQXJyYXkuZnJvbSh0ZW1wLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHNpYmxpbmdUZHNbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHNpYmxpbmdUZHNbMF0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGVtcC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgdGhhdC5fY29tcGxlbWVudExpbmUoc2libGluZ1Rkc1swXSwgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KTtcbiAgICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3Moc2libGluZ1RkcywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICBzaWJsaW5nVGRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3MoZWwucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSwgJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsZXQgdGVtcCA9IG5vZGVDaGFydC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAgICAgc2libGluZ1Rkc1tpbnNlcnRQb3N0aW9uXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlQ2hhcnQucGFyZW50Tm9kZSwgc2libGluZ1Rkc1tpbnNlcnRQb3N0aW9uICsgMV0pO1xuICAgICAgICAgICAgICB0ZW1wLnJlbW92ZSgpO1xuICAgICAgICAgICAgICB0aGF0Ll9jb21wbGVtZW50TGluZShzaWJsaW5nVGRzW2luc2VydFBvc3Rpb25dLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyhzaWJsaW5nVGRzLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHRoYXQuX2dldERlc2NFbGVtZW50cyhzaWJsaW5nVGRzLnNsaWNlKDAsIGluc2VydFBvc3Rpb24gKyAxKSwgJy5ub2RlJyksICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHMoc2libGluZ1Rkcy5zbGljZShpbnNlcnRQb3N0aW9uICsgMSksICcubm9kZScpLCAnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7IC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGFuZCBwYXJlbnQgbm9kZSBmb3IgdGhlIHNwZWNpZmljIG5kb2VcbiAgICAgIGxldCBub2RlQ291bnQgPSAwO1xuXG4gICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5LmNhbGwodGhhdCwgdGhhdC5jaGFydCwgbm9kZURhdGEsIDAsICgpID0+IHtcbiAgICAgICAgaWYgKCsrbm9kZUNvdW50ID09PSBzaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICBsZXQgdGVtcCA9IG5vZGVDaGFydC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bM11cbiAgICAgICAgICAgIC5jaGlsZHJlbltpbnNlcnRQb3N0aW9uXSxcbiAgICAgICAgICAgIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblxuICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIDIpO1xuICAgICAgICAgIHRkLmFwcGVuZENoaWxkKG5vZGVDaGFydCk7XG4gICAgICAgICAgdGVtcC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZCwgdGVtcC5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgICAgICAgIHRoYXQuX2NvbXBsZW1lbnRMaW5lKHRlbXAsIHNpYmxpbmdDb3VudCwgMSk7XG5cbiAgICAgICAgICBsZXQgdGVtcDIgPSB0aGF0Ll9jbG9zZXN0KG5vZGVDaGFydCwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAgICAgLnBhcmVudE5vZGUuY2hpbGRyZW5bMF07XG5cbiAgICAgICAgICB0ZW1wMi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyhBcnJheS5mcm9tKHRlbXAyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLCAnc2xpZGUtZG93bicpO1xuXG4gICAgICAgICAgbGV0IHRlbXAzID0gdGhpcy5fc2libGluZ3Mobm9kZUNoYXJ0LnBhcmVudE5vZGUpO1xuXG4gICAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGVtcDMsICdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHModGVtcDMuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbiksICcubm9kZScpLCAnc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHModGVtcDMuc2xpY2UoaW5zZXJ0UG9zdGlvbiksICcubm9kZScpLCAnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBhZGRTaWJsaW5ncyhub2RlLCBkYXRhKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuXG4gICAgdGhpcy5jaGFydC5kYXRhc2V0LmluRWRpdCA9ICdhZGRTaWJsaW5ncyc7XG4gICAgdGhpcy5fYnVpbGRTaWJsaW5nTm9kZS5jYWxsKHRoaXMsIHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJyksIGRhdGEsICgpID0+IHtcbiAgICAgIHRoYXQuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAuZGF0YXNldC5zaWJsaW5nc0xvYWRlZCA9IHRydWU7XG4gICAgICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvcignLmxlZnRFZGdlJykpIHtcbiAgICAgICAgbGV0IHJpZ2h0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICBsZWZ0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICByaWdodEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYScpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgIGxlZnRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYScpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGxlZnRFZGdlKTtcbiAgICAgIH1cbiAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKG5vZGUpO1xuICAgICAgdGhhdC5jaGFydC5kYXRhc2V0LmluRWRpdCA9ICcnO1xuICAgIH0pO1xuICB9XG4gIHJlbW92ZU5vZGVzKG5vZGUpIHtcbiAgICBsZXQgcGFyZW50ID0gdGhpcy5fY2xvc2VzdChub2RlLCBlbCA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZSxcbiAgICAgIHNpYnMgPSB0aGlzLl9zaWJsaW5ncyhwYXJlbnQucGFyZW50Tm9kZSk7XG5cbiAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09PSAnVEQnKSB7XG4gICAgICBpZiAodGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdzaWJsaW5ncycpLmV4aXN0KSB7XG4gICAgICAgIHNpYnNbMl0ucXVlcnlTZWxlY3RvcignLnRvcExpbmUnKS5uZXh0RWxlbWVudFNpYmxpbmcucmVtb3ZlKCk7XG4gICAgICAgIHNpYnNbMl0ucXVlcnlTZWxlY3RvcignLnRvcExpbmUnKS5yZW1vdmUoKTtcbiAgICAgICAgc2lic1swXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBzaWJzWzJdLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgICAgIHNpYnNbMV0uY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgc2lic1syXS5jaGlsZHJlbi5sZW5ndGgpO1xuICAgICAgICBwYXJlbnQucmVtb3ZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaWJzWzBdLmNoaWxkcmVuWzBdLnJlbW92ZUF0dHJpYnV0ZSgnY29sc3BhbicpO1xuICAgICAgICBzaWJzWzBdLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b21FZGdlJykucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX3NpYmxpbmdzKHNpYnNbMF0pLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBBcnJheS5mcm9tKHBhcmVudC5wYXJlbnROb2RlLmNoaWxkcmVuKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcbiAgICB9XG4gIH1cbiAgLy8gYmluZCBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgbGVmdCBhbmQgcmlnaHQgZWRnZXNcbiAgX2NsaWNrSG9yaXpvbnRhbEVkZ2UoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgaEVkZ2UgPSBldmVudC50YXJnZXQsXG4gICAgICBub2RlID0gaEVkZ2UucGFyZW50Tm9kZSxcbiAgICAgIHNpYmxpbmdzU3RhdGUgPSB0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ3NpYmxpbmdzJyk7XG5cbiAgICBpZiAoc2libGluZ3NTdGF0ZS5leGlzdCkge1xuICAgICAgbGV0IHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgICAgfSkucGFyZW50Tm9kZSxcbiAgICAgICAgc2libGluZ3MgPSB0aGlzLl9zaWJsaW5ncyh0ZW1wKTtcblxuICAgICAgaWYgKHNpYmxpbmdzLnNvbWUoKGVsKSA9PiB7XG4gICAgICAgIGxldCBub2RlID0gZWwucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5faXNWaXNpYmxlKG5vZGUpICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZScpO1xuICAgICAgfSkpIHsgcmV0dXJuOyB9XG4gICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3ApIHtcbiAgICAgICAgbGV0IHByZXZTaWIgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUucHJldmlvdXNFbGVtZW50U2libGluZyxcbiAgICAgICAgICBuZXh0U2liID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICBpZiAoaEVkZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdsZWZ0RWRnZScpKSB7XG4gICAgICAgICAgaWYgKHByZXZTaWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3Mobm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oaWRlU2libGluZ3Mobm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG5leHRTaWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3Mobm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxvYWQgdGhlIG5ldyBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgIGxldCBub2RlSWQgPSBoRWRnZS5wYXJlbnROb2RlLmlkLFxuICAgICAgICB1cmwgPSAodGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdwYXJlbnQnKS5leGlzdCkgP1xuICAgICAgICAgICh0eXBlb2Ygb3B0cy5hamF4VVJMLnNpYmxpbmdzID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIG9wdHMuYWpheFVSTC5zaWJsaW5ncyhKU09OLnBhcnNlKG5vZGUuZGF0YXNldC5zb3VyY2UpKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxuICAgICAgICAgICh0eXBlb2Ygb3B0cy5hamF4VVJMLmZhbWlsaWVzID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIG9wdHMuYWpheFVSTC5mYW1pbGllcyhKU09OLnBhcnNlKG5vZGUuZGF0YXNldC5zb3VyY2UpKSA6IG9wdHMuYWpheFVSTC5mYW1pbGllcyArIG5vZGVJZCk7XG5cbiAgICAgIGlmICh0aGlzLl9zdGFydExvYWRpbmcoaEVkZ2UsIG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX2dldEpTT04odXJsKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgIGlmICh0aGF0LmNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGlmIChyZXNwLnNpYmxpbmdzIHx8IHJlc3AuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRTaWJsaW5ncyhub2RlLCByZXNwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBzaWJsaW5nIG5vZGVzIGRhdGEnLCBlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC5fZW5kTG9hZGluZyhoRWRnZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBldmVudCBoYW5kbGVyIGZvciB0b2dnbGUgYnV0dG9ucyBpbiBIeWJyaWQoaG9yaXpvbnRhbCArIHZlcnRpY2FsKSBPcmdDaGFydFxuICBfY2xpY2tUb2dnbGVCdXR0b24oZXZlbnQpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0b2dnbGVCdG4gPSBldmVudC50YXJnZXQsXG4gICAgICBkZXNjV3JhcHBlciA9IHRvZ2dsZUJ0bi5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZyxcbiAgICAgIGRlc2NlbmRhbnRzID0gQXJyYXkuZnJvbShkZXNjV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKSxcbiAgICAgIGNoaWxkcmVuID0gQXJyYXkuZnJvbShkZXNjV3JhcHBlci5jaGlsZHJlbikubWFwKGl0ZW0gPT4gaXRlbS5xdWVyeVNlbGVjdG9yKCcubm9kZScpKTtcblxuICAgIGlmIChjaGlsZHJlbi5zb21lKChpdGVtKSA9PiBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKSkpIHsgcmV0dXJuOyB9XG4gICAgdG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLXBsdXMtc3F1YXJlJyk7XG4gICAgdG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLW1pbnVzLXNxdWFyZScpO1xuICAgIGlmIChkZXNjZW5kYW50c1swXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlLXVwJykpIHtcbiAgICAgIGRlc2NXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgdGhpcy5fcmVwYWludChjaGlsZHJlblswXSk7XG4gICAgICB0aGlzLl9hZGRDbGFzcyhjaGlsZHJlbiwgJ3NsaWRlJyk7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhjaGlsZHJlbiwgJ3NsaWRlLXVwJyk7XG4gICAgICB0aGlzLl9vbmUoY2hpbGRyZW5bMF0sICd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xuICAgICAgICB0aGF0Ll9yZW1vdmVDbGFzcyhjaGlsZHJlbiwgJ3NsaWRlJyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYWRkQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZSBzbGlkZS11cCcpO1xuICAgICAgdGhpcy5fb25lKGRlc2NlbmRhbnRzWzBdLCAndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgICAgdGhhdC5fcmVtb3ZlQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZScpO1xuICAgICAgICBkZXNjZW5kYW50cy5mb3JFYWNoKGRlc2MgPT4ge1xuICAgICAgICAgIGxldCB1bCA9IHRoYXQuX2Nsb3Nlc3QoZGVzYywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdVTCc7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB1bC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY2VuZGFudHMuZm9yRWFjaChkZXNjID0+IHtcbiAgICAgICAgbGV0IHN1YlRCcyA9IEFycmF5LmZyb20oZGVzYy5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlQnRuJykpO1xuXG4gICAgICAgIHRoYXQuX3JlbW92ZUNsYXNzKHN1YlRCcywgJ2ZhLW1pbnVzLXNxdWFyZScpO1xuICAgICAgICB0aGF0Ll9hZGRDbGFzcyhzdWJUQnMsICdmYS1wbHVzLXNxdWFyZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIF9kaXNwYXRjaENsaWNrRXZlbnQoZXZlbnQpIHtcbiAgICBsZXQgY2xhc3NMaXN0ID0gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdDtcblxuICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ3RvcEVkZ2UnKSkge1xuICAgICAgdGhpcy5fY2xpY2tUb3BFZGdlKGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKGNsYXNzTGlzdC5jb250YWlucygncmlnaHRFZGdlJykgfHwgY2xhc3NMaXN0LmNvbnRhaW5zKCdsZWZ0RWRnZScpKSB7XG4gICAgICB0aGlzLl9jbGlja0hvcml6b250YWxFZGdlKGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKGNsYXNzTGlzdC5jb250YWlucygnYm90dG9tRWRnZScpKSB7XG4gICAgICB0aGlzLl9jbGlja0JvdHRvbUVkZ2UoZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKCd0b2dnbGVCdG4nKSkge1xuICAgICAgdGhpcy5fY2xpY2tUb2dnbGVCdXR0b24oZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jbGlja05vZGUoZXZlbnQpO1xuICAgIH1cbiAgfVxuICBfb25EcmFnU3RhcnQoZXZlbnQpIHtcbiAgICBsZXQgbm9kZURpdiA9IGV2ZW50LnRhcmdldCxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBpc0ZpcmVmb3ggPSAvZmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcblxuICAgIGlmIChpc0ZpcmVmb3gpIHtcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L2h0bWwnLCAnaGFjayBmb3IgZmlyZWZveCcpO1xuICAgIH1cbiAgICAvLyBpZiB1c2VycyBlbmFibGUgem9vbSBvciBkaXJlY3Rpb24gb3B0aW9uc1xuICAgIGlmICh0aGlzLmNoYXJ0LnN0eWxlLnRyYW5zZm9ybSkge1xuICAgICAgbGV0IGdob3N0Tm9kZSwgbm9kZUNvdmVyO1xuXG4gICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naG9zdC1ub2RlJykpIHtcbiAgICAgICAgZ2hvc3ROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICAgICAgZ2hvc3ROb2RlLmNsYXNzTGlzdC5hZGQoJ2dob3N0LW5vZGUnKTtcbiAgICAgICAgbm9kZUNvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdyZWN0Jyk7XG4gICAgICAgIGdob3N0Tm9kZS5hcHBlbmRDaGlsZChub2RlQ292ZXIpO1xuICAgICAgICB0aGlzLmNoYXJ0LmFwcGVuZENoaWxkKGdob3N0Tm9kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnaG9zdE5vZGUgPSB0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5naG9zdC1ub2RlJyk7XG4gICAgICAgIG5vZGVDb3ZlciA9IGdob3N0Tm9kZS5jaGlsZHJlblswXTtcbiAgICAgIH1cbiAgICAgIGxldCB0cmFuc1ZhbHVlcyA9IHRoaXMuY2hhcnQuc3R5bGUudHJhbnNmb3JtLnNwbGl0KCcsJyksXG4gICAgICAgIHNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQoKG9wdHMuZGlyZWN0aW9uID09PSAndDJiJyB8fCBvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpID9cbiAgICAgICAgICB0cmFuc1ZhbHVlc1swXS5zbGljZSh0cmFuc1ZhbHVlc1swXS5pbmRleE9mKCcoJykgKyAxKSA6IHRyYW5zVmFsdWVzWzFdKSk7XG5cbiAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgbm9kZURpdi5vZmZzZXRXaWR0aCk7XG4gICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBub2RlRGl2Lm9mZnNldEhlaWdodCk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd4JywgNSAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3knLCA1ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAxMjAgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCA0MCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J4JywgNCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J5JywgNCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIDEgKiBzY2FsZSk7XG4gICAgICBsZXQgeE9mZnNldCA9IGV2ZW50Lm9mZnNldFggKiBzY2FsZSxcbiAgICAgICAgeU9mZnNldCA9IGV2ZW50Lm9mZnNldFkgKiBzY2FsZTtcblxuICAgICAgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnbDJyJykge1xuICAgICAgICB4T2Zmc2V0ID0gZXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gZXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ3IybCcpIHtcbiAgICAgICAgeE9mZnNldCA9IG5vZGVEaXYub2Zmc2V0V2lkdGggLSBldmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSBldmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0Jykge1xuICAgICAgICB4T2Zmc2V0ID0gbm9kZURpdi5vZmZzZXRXaWR0aCAtIGV2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9IG5vZGVEaXYub2Zmc2V0SGVpZ2h0IC0gZXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgfVxuICAgICAgaWYgKGlzRmlyZWZveCkgeyAvLyBoYWNrIGZvciBvbGQgdmVyc2lvbiBvZiBGaXJlZm94KDwgNDguMClcbiAgICAgICAgbGV0IGdob3N0Tm9kZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICBnaG9zdE5vZGVXcmFwcGVyLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICsgKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKGdob3N0Tm9kZSk7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlV3JhcHBlciwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XG4gICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdyZ2IoMTkxLCAwLCAwKScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGUsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgZHJhZ2dlZCA9IGV2ZW50LnRhcmdldCxcbiAgICAgIGRyYWdab25lID0gdGhpcy5fY2xvc2VzdChkcmFnZ2VkLCAoZWwpID0+IHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgICB9KS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyksXG4gICAgICBkcmFnSGllciA9IEFycmF5LmZyb20odGhpcy5fY2xvc2VzdChkcmFnZ2VkLCAoZWwpID0+IHtcbiAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVEFCTEUnO1xuICAgICAgfSkucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSk7XG5cbiAgICB0aGlzLmRyYWdnZWQgPSBkcmFnZ2VkO1xuICAgIEFycmF5LmZyb20odGhpcy5jaGFydC5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBpZiAoIWRyYWdIaWVyLmluY2x1ZGVzKG5vZGUpKSB7XG4gICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSkge1xuICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYShkcmFnZ2VkLCBkcmFnWm9uZSwgbm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX29uRHJhZ092ZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBkcm9wWm9uZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICBpZiAoIWRyb3Bab25lLmNsYXNzTGlzdC5jb250YWlucygnYWxsb3dlZERyb3AnKSkge1xuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XG4gICAgfVxuICB9XG4gIF9vbkRyYWdFbmQoZXZlbnQpIHtcbiAgICBBcnJheS5mcm9tKHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbG93ZWREcm9wJykpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhbGxvd2VkRHJvcCcpO1xuICAgIH0pO1xuICB9XG4gIF9vbkRyb3AoZXZlbnQpIHtcbiAgICBsZXQgZHJvcFpvbmUgPSBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgY2hhcnQgPSB0aGlzLmNoYXJ0LFxuICAgICAgZHJhZ2dlZCA9IHRoaXMuZHJhZ2dlZCxcbiAgICAgIGRyYWdab25lID0gdGhpcy5fY2xvc2VzdChkcmFnZ2VkLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgICB9KS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuXG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3MoQXJyYXkuZnJvbShjaGFydC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsb3dlZERyb3AnKSksICdhbGxvd2VkRHJvcCcpO1xuICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxuICAgIGlmICghZHJvcFpvbmUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZykgeyAvLyBpZiB0aGUgZHJvcCB6b25lIGlzIGEgbGVhZiBub2RlXG4gICAgICBsZXQgYm90dG9tRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgYm90dG9tRWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmEnKTtcbiAgICAgIGRyb3Bab25lLmFwcGVuZENoaWxkKGJvdHRvbUVkZ2UpO1xuICAgICAgZHJvcFpvbmUucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCAyKTtcbiAgICAgIGxldCB0YWJsZSA9IHRoaXMuX2Nsb3Nlc3QoZHJvcFpvbmUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgICAgfSksXG4gICAgICAgIHVwcGVyVHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICBsb3dlclRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgbm9kZVRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgdXBwZXJUci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzJyk7XG4gICAgICB1cHBlclRyLmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPmA7XG4gICAgICB0YWJsZS5hcHBlbmRDaGlsZCh1cHBlclRyKTtcbiAgICAgIGxvd2VyVHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycpO1xuICAgICAgbG93ZXJUci5pbm5lckhUTUwgPSBgPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+YDtcbiAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGxvd2VyVHIpO1xuICAgICAgbm9kZVRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm9kZXMnKTtcbiAgICAgIHRhYmxlLmFwcGVuZENoaWxkKG5vZGVUcik7XG4gICAgICBBcnJheS5mcm9tKGRyYWdnZWQucXVlcnlTZWxlY3RvckFsbCgnLmhvcml6b250YWxFZGdlJykpLmZvckVhY2goKGhFZGdlKSA9PiB7XG4gICAgICAgIGRyYWdnZWQucmVtb3ZlQ2hpbGQoaEVkZ2UpO1xuICAgICAgfSk7XG4gICAgICBsZXQgZHJhZ2dlZFRkID0gdGhpcy5fY2xvc2VzdChkcmFnZ2VkLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlO1xuXG4gICAgICBub2RlVHIuYXBwZW5kQ2hpbGQoZHJhZ2dlZFRkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGRyb3BDb2xzcGFuID0gd2luZG93LnBhcnNlSW50KGRyb3Bab25lLnBhcmVudE5vZGUuY29sU3BhbikgKyAyO1xuXG4gICAgICBkcm9wWm9uZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgIGRyb3Bab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgZHJvcENvbHNwYW4pO1xuICAgICAgaWYgKCFkcmFnZ2VkLnF1ZXJ5U2VsZWN0b3IoJy5ob3Jpem9udGFsRWRnZScpKSB7XG4gICAgICAgIGxldCByaWdodEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgbGVmdEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgcmlnaHRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmEnKTtcbiAgICAgICAgZHJhZ2dlZC5hcHBlbmRDaGlsZChyaWdodEVkZ2UpO1xuICAgICAgICBsZWZ0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmEnKTtcbiAgICAgICAgZHJhZ2dlZC5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICB9XG4gICAgICBsZXQgdGVtcCA9IGRyb3Bab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nLFxuICAgICAgICBsZWZ0bGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyksXG4gICAgICAgIHJpZ2h0bGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG5cbiAgICAgIGxlZnRsaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGVmdExpbmUgdG9wTGluZScpO1xuICAgICAgbGVmdGxpbmUuaW5uZXJIVE1MID0gYCZuYnNwO2A7XG4gICAgICB0ZW1wLmluc2VydEJlZm9yZShsZWZ0bGluZSwgdGVtcC5jaGlsZHJlblsxXSk7XG4gICAgICByaWdodGxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyaWdodExpbmUgdG9wTGluZScpO1xuICAgICAgcmlnaHRsaW5lLmlubmVySFRNTCA9IGAmbmJzcDtgO1xuICAgICAgdGVtcC5pbnNlcnRCZWZvcmUocmlnaHRsaW5lLCB0ZW1wLmNoaWxkcmVuWzJdKTtcbiAgICAgIHRlbXAubmV4dEVsZW1lbnRTaWJsaW5nLmFwcGVuZENoaWxkKHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgIH0pLnBhcmVudE5vZGUpO1xuXG4gICAgICBsZXQgZHJvcFNpYnMgPSB0aGlzLl9zaWJsaW5ncyh0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICB9KS5wYXJlbnROb2RlKS5tYXAoKGVsKSA9PiBlbC5xdWVyeVNlbGVjdG9yKCcubm9kZScpKTtcblxuICAgICAgaWYgKGRyb3BTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBsZXQgcmlnaHRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgIGxlZnRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgIHJpZ2h0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhJyk7XG4gICAgICAgIGRyb3BTaWJzWzBdLmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgIGxlZnRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYScpO1xuICAgICAgICBkcm9wU2lic1swXS5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHNlY29uZGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcmFnZ2VkIG5vZGVcbiAgICBsZXQgZHJhZ0NvbFNwYW4gPSB3aW5kb3cucGFyc2VJbnQoZHJhZ1pvbmUuY29sU3Bhbik7XG5cbiAgICBpZiAoZHJhZ0NvbFNwYW4gPiAyKSB7XG4gICAgICBkcmFnWm9uZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBkcmFnQ29sU3BhbiAtIDIpO1xuICAgICAgZHJhZ1pvbmUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgZHJhZ0NvbFNwYW4gLSAyKTtcbiAgICAgIGxldCB0ZW1wID0gZHJhZ1pvbmUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICB0ZW1wLmNoaWxkcmVuWzFdLnJlbW92ZSgpO1xuICAgICAgdGVtcC5jaGlsZHJlblsxXS5yZW1vdmUoKTtcblxuICAgICAgbGV0IGRyYWdTaWJzID0gQXJyYXkuZnJvbShkcmFnWm9uZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bM10uY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAodGQpIHtcbiAgICAgICAgcmV0dXJuIHRkLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGRyYWdTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBkcmFnU2lic1swXS5xdWVyeVNlbGVjdG9yKCcubGVmdEVkZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgZHJhZ1NpYnNbMF0ucXVlcnlTZWxlY3RvcignLnJpZ2h0RWRnZScpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkcmFnWm9uZS5yZW1vdmVBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcbiAgICAgIGRyYWdab25lLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykucmVtb3ZlQ2hpbGQoZHJhZ1pvbmUucXVlcnlTZWxlY3RvcignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICBBcnJheS5mcm9tKGRyYWdab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbikuc2xpY2UoMSkuZm9yRWFjaCgodHIpID0+IHRyLnJlbW92ZSgpKTtcbiAgICB9XG4gICAgbGV0IGN1c3RvbUUgPSBuZXcgQ3VzdG9tRXZlbnQoJ25vZGVkcm9wcGVkLm9yZ2NoYXJ0JywgeyAnZGV0YWlsJzoge1xuICAgICAgJ2RyYWdnZWROb2RlJzogZHJhZ2dlZCxcbiAgICAgICdkcmFnWm9uZSc6IGRyYWdab25lLmNoaWxkcmVuWzBdLFxuICAgICAgJ2Ryb3Bab25lJzogZHJvcFpvbmVcbiAgICB9fSk7XG5cbiAgICBjaGFydC5kaXNwYXRjaEV2ZW50KGN1c3RvbUUpO1xuICB9XG4gIC8vIGNyZWF0ZSBub2RlXG4gIF9jcmVhdGVOb2RlKG5vZGVEYXRhLCBsZXZlbCkge1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWYgKG5vZGVEYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG5vZGVEYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgY2hpbGQucGFyZW50SWQgPSBub2RlRGF0YS5pZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdHJ1Y3QgdGhlIGNvbnRlbnQgb2Ygbm9kZVxuICAgICAgbGV0IG5vZGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgZGVsZXRlIG5vZGVEYXRhLmNoaWxkcmVuO1xuICAgICAgbm9kZURpdi5kYXRhc2V0LnNvdXJjZSA9IEpTT04uc3RyaW5naWZ5KG5vZGVEYXRhKTtcbiAgICAgIGlmIChub2RlRGF0YVtvcHRzLm5vZGVJZF0pIHtcbiAgICAgICAgbm9kZURpdi5pZCA9IG5vZGVEYXRhW29wdHMubm9kZUlkXTtcbiAgICAgIH1cbiAgICAgIGxldCBpbkVkaXQgPSB0aGF0LmNoYXJ0LmRhdGFzZXQuaW5FZGl0LFxuICAgICAgICBpc0hpZGRlbjtcblxuICAgICAgaWYgKGluRWRpdCkge1xuICAgICAgICBpc0hpZGRlbiA9IGluRWRpdCA9PT0gJ2FkZENoaWxkcmVuJyA/ICcgc2xpZGUtdXAnIDogJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc0hpZGRlbiA9IGxldmVsID49IG9wdHMuZGVwdGggPyAnIHNsaWRlLXVwJyA6ICcnO1xuICAgICAgfVxuICAgICAgbm9kZURpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vZGUgJyArIChub2RlRGF0YS5jbGFzc05hbWUgfHwgJycpICsgaXNIaWRkZW4pO1xuICAgICAgaWYgKG9wdHMuZHJhZ2dhYmxlKSB7XG4gICAgICAgIG5vZGVEaXYuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlRGF0YS5wYXJlbnRJZCkge1xuICAgICAgICBub2RlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1wYXJlbnQnLCBub2RlRGF0YS5wYXJlbnRJZCk7XG4gICAgICB9XG4gICAgICBub2RlRGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+JHtub2RlRGF0YVtvcHRzLm5vZGVUaXRsZV19PC9kaXY+XG4gICAgICAgICR7b3B0cy5ub2RlQ29udGVudCA/IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPiR7bm9kZURhdGFbb3B0cy5ub2RlQ29udGVudF19PC9kaXY+YCA6ICcnfVxuICAgICAgYDtcbiAgICAgIC8vIGFwcGVuZCA0IGRpcmVjdGlvbiBhcnJvd3Mgb3IgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbnNcbiAgICAgIGxldCBmbGFncyA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnJztcblxuICAgICAgaWYgKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICBpZiAoKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIE51bWJlcihmbGFncy5zdWJzdHIoMiwgMSkpKSB7XG4gICAgICAgICAgbGV0IHRvZ2dsZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIGljb24gPSBsZXZlbCArIDEgPj0gb3B0cy5kZXB0aCA/ICdwbHVzJyA6ICdtaW51cyc7XG5cbiAgICAgICAgICB0b2dnbGVCdG4uc2V0QXR0cmlidXRlKCdjbGFzcycsICd0b2dnbGVCdG4gZmEgZmEtJyArIGljb24gKyAnLXNxdWFyZScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQodG9nZ2xlQnRuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMCwgMSkpKSB7XG4gICAgICAgICAgbGV0IHRvcEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICB0b3BFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQodG9wRWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMSwgMSkpKSB7XG4gICAgICAgICAgbGV0IHJpZ2h0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIGxlZnRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgICAgcmlnaHRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmEnKTtcbiAgICAgICAgICBub2RlRGl2LmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgICAgbGVmdEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMiwgMSkpKSB7XG4gICAgICAgICAgbGV0IGJvdHRvbUVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgICBzeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgICB0aXRsZSA9IG5vZGVEaXYucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRpdGxlJyk7XG5cbiAgICAgICAgICBib3R0b21FZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQoYm90dG9tRWRnZSk7XG4gICAgICAgICAgc3ltYm9sLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmEgJyArIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sJyk7XG4gICAgICAgICAgdGl0bGUuaW5zZXJ0QmVmb3JlKHN5bWJvbCwgdGl0bGUuY2hpbGRyZW5bMF0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoYXQuX2hvdmVyTm9kZS5iaW5kKHRoYXQpKTtcbiAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoYXQuX2hvdmVyTm9kZS5iaW5kKHRoYXQpKTtcbiAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGF0Ll9kaXNwYXRjaENsaWNrRXZlbnQuYmluZCh0aGF0KSk7XG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGF0Ll9vbkRyYWdTdGFydC5iaW5kKHRoYXQpKTtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoYXQuX29uRHJhZ092ZXIuYmluZCh0aGF0KSk7XG4gICAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoYXQuX29uRHJhZ0VuZC5iaW5kKHRoYXQpKTtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhhdC5fb25Ecm9wLmJpbmQodGhhdCkpO1xuICAgICAgfVxuICAgICAgLy8gYWxsb3cgdXNlciB0byBhcHBlbmQgZG9tIG1vZGlmaWNhdGlvbiBhZnRlciBmaW5pc2hpbmcgbm9kZSBjcmVhdGUgb2Ygb3JnY2hhcnRcbiAgICAgIGlmIChvcHRzLmNyZWF0ZU5vZGUpIHtcbiAgICAgICAgb3B0cy5jcmVhdGVOb2RlKG5vZGVEaXYsIG5vZGVEYXRhKTtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShub2RlRGl2KTtcbiAgICB9KTtcbiAgfVxuICBidWlsZEhpZXJhcmNoeShhcHBlbmRUbywgbm9kZURhdGEsIGxldmVsLCBjYWxsYmFjaykge1xuICAgIC8vIENvbnN0cnVjdCB0aGUgbm9kZVxuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBub2RlV3JhcHBlcixcbiAgICAgIGNoaWxkTm9kZXMgPSBub2RlRGF0YS5jaGlsZHJlbixcbiAgICAgIGlzVmVydGljYWxOb2RlID0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aDtcblxuICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID4gMSkgeyAvLyBpZiBub2RlRGF0YSBoYXMgbmVzdGVkIHN0cnVjdHVyZVxuICAgICAgbm9kZVdyYXBwZXIgPSBpc1ZlcnRpY2FsTm9kZSA/IGFwcGVuZFRvIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgYXBwZW5kVG8uYXBwZW5kQ2hpbGQobm9kZVdyYXBwZXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwpXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZURpdikge1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICBub2RlV3JhcHBlci5pbnNlcnRCZWZvcmUobm9kZURpdiwgbm9kZVdyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgIHRyLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDx0ZCAke2NoaWxkTm9kZXMgPyBgY29sc3Bhbj1cIiR7Y2hpbGROb2Rlcy5sZW5ndGggKiAyfVwiYCA6ICcnfT5cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgYDtcbiAgICAgICAgICB0ci5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChub2RlRGl2KTtcbiAgICAgICAgICBub2RlV3JhcHBlci5pbnNlcnRCZWZvcmUodHIsIG5vZGVXcmFwcGVyLmNoaWxkcmVuWzBdID8gbm9kZVdyYXBwZXIuY2hpbGRyZW5bMF0gOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0IG5vZGUnLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXG4gICAgaWYgKGNoaWxkTm9kZXMpIHtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID09PSAxKSB7IC8vIGlmIG5vZGVEYXRhIGlzIGp1c3QgYW4gYXJyYXlcbiAgICAgICAgbm9kZVdyYXBwZXIgPSBhcHBlbmRUbztcbiAgICAgIH1cbiAgICAgIGxldCBpc0hpZGRlbixcbiAgICAgICAgaXNWZXJ0aWNhbExheWVyID0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID49IG9wdHMudmVydGljYWxEZXB0aCxcbiAgICAgICAgaW5FZGl0ID0gdGhhdC5jaGFydC5kYXRhc2V0LmluRWRpdDtcblxuICAgICAgaWYgKGluRWRpdCkge1xuICAgICAgICBpc0hpZGRlbiA9IGluRWRpdCA9PT0gJ2FkZFNpYmxpbmdzJyA/ICcnIDogJyBoaWRkZW4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNIaWRkZW4gPSBsZXZlbCArIDEgPj0gb3B0cy5kZXB0aCA/ICcgaGlkZGVuJyA6ICcnO1xuICAgICAgfVxuXG4gICAgICAvLyBkcmF3IHRoZSBsaW5lIGNsb3NlIHRvIHBhcmVudCBub2RlXG4gICAgICBpZiAoIWlzVmVydGljYWxMYXllcikge1xuICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgIHRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMnICsgaXNIaWRkZW4pO1xuICAgICAgICB0ci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHRkIGNvbHNwYW49XCIkeyBjaGlsZE5vZGVzLmxlbmd0aCAqIDIgfVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgYDtcbiAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgfVxuICAgICAgLy8gZHJhdyB0aGUgbGluZXMgY2xvc2UgdG8gY2hpbGRyZW4gbm9kZXNcbiAgICAgIGxldCBsaW5lTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICBsaW5lTGF5ZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycgKyBpc0hpZGRlbik7XG4gICAgICBsaW5lTGF5ZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPlxuICAgICAgICAke2NoaWxkTm9kZXMuc2xpY2UoMSkubWFwKCgpID0+IGBcbiAgICAgICAgICA8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD5cbiAgICAgICAgICA8dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+XG4gICAgICAgICAgYCkuam9pbignJyl9XG4gICAgICAgIDx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD5cbiAgICAgIGA7XG4gICAgICBsZXQgbm9kZUxheWVyO1xuXG4gICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgIG5vZGVMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIGlmIChpc0hpZGRlbikge1xuICAgICAgICAgIG5vZGVMYXllci5jbGFzc0xpc3QuYWRkKGlzSGlkZGVuLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxldmVsICsgMiA9PT0gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgIHRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndmVydGljYWxOb2RlcycgKyBpc0hpZGRlbik7XG4gICAgICAgICAgdHIuaW5uZXJIVE1MID0gYDx0ZD48L3RkPmA7XG4gICAgICAgICAgdHIuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChub2RlTGF5ZXIpO1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlV3JhcHBlci5hcHBlbmRDaGlsZChub2RlTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBub2RlTGF5ZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub2RlcycgKyBpc0hpZGRlbik7XG4gICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKGxpbmVMYXllcik7XG4gICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKG5vZGVMYXllcik7XG4gICAgICB9XG4gICAgICAvLyByZWN1cnNlIHRocm91Z2ggY2hpbGRyZW4gbm9kZXNcbiAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgbGV0IG5vZGVDZWxsO1xuXG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICBub2RlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgIG5vZGVDZWxsLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIDIpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVMYXllci5hcHBlbmRDaGlsZChub2RlQ2VsbCk7XG4gICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkobm9kZUNlbGwsIGNoaWxkLCBsZXZlbCArIDEsIGNhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBfY2xpY2tDaGFydChldmVudCkge1xuICAgIGxldCBjbG9zZXN0Tm9kZSA9IHRoaXMuX2Nsb3Nlc3QoZXZlbnQudGFyZ2V0LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlJyk7XG4gICAgfSk7XG5cbiAgICBpZiAoIWNsb3Nlc3ROb2RlICYmIHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcignLm5vZGUuZm9jdXNlZCcpKSB7XG4gICAgICB0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlLmZvY3VzZWQnKS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJyk7XG4gICAgfVxuICB9XG4gIF9jbGlja0V4cG9ydEJ1dHRvbigpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGNoYXJ0Q29udGFpbmVyID0gdGhpcy5jaGFydENvbnRhaW5lcixcbiAgICAgIG1hc2sgPSBjaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAubWFzaycpLFxuICAgICAgc291cmNlQ2hhcnQgPSBjaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub3JnY2hhcnQ6bm90KC5oaWRkZW4pJyksXG4gICAgICBmbGFnID0gb3B0cy5kaXJlY3Rpb24gPT09ICdsMnInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAncjJsJztcblxuICAgIGlmICghbWFzaykge1xuICAgICAgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbWFzay5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ21hc2snKTtcbiAgICAgIG1hc2suaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPmA7XG4gICAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChtYXNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFzay5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgY2hhcnRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgd2luZG93Lmh0bWwyY2FudmFzKHNvdXJjZUNoYXJ0LCB7XG4gICAgICAnd2lkdGgnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0IDogc291cmNlQ2hhcnQuY2xpZW50V2lkdGgsXG4gICAgICAnaGVpZ2h0JzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoIDogc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0LFxuICAgICAgJ29uY2xvbmUnOiBmdW5jdGlvbiAoY2xvbmVEb2MpIHtcbiAgICAgICAgbGV0IGNhbnZhc0NvbnRhaW5lciA9IGNsb25lRG9jLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXNDb250YWluZXInKTtcblxuICAgICAgICBjYW52YXNDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XG4gICAgICAgIGNhbnZhc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub3JnY2hhcnQ6bm90KC5oaWRkZW4pJykudHJhbnNmb3JtID0gJyc7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbigoY2FudmFzKSA9PiB7XG4gICAgICBsZXQgZG93bmxvYWRCdG4gPSBjaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub2MtZG93bmxvYWQtYnRuJyk7XG5cbiAgICAgIGNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tYXNrJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBkb3dubG9hZEJ0bi5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCkpO1xuICAgICAgZG93bmxvYWRCdG4uY2xpY2soKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IHRoZSBjdXJlbnQgb3JnY2hhcnQhJywgZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgIH0pO1xuICB9XG4gIF9sb29wQ2hhcnQoY2hhcnQpIHtcbiAgICBsZXQgc3ViT2JqID0geyAnaWQnOiBjaGFydC5xdWVyeVNlbGVjdG9yKCcubm9kZScpLmlkIH07XG5cbiAgICBpZiAoY2hhcnQuY2hpbGRyZW5bM10pIHtcbiAgICAgIEFycmF5LmZyb20oY2hhcnQuY2hpbGRyZW5bM10uY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoaXMuX2xvb3BDaGFydChlbC5maXJzdENoaWxkKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1Yk9iajtcbiAgfVxuICBnZXRIaWVyYXJjaHkoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykuaWQpIHtcbiAgICAgIHJldHVybiAnRXJyb3I6IE5vZGVzIG9mIG9yZ2hjYXJ0IHRvIGJlIGV4cG9ydGVkIG11c3QgaGF2ZSBpZCBhdHRyaWJ1dGUhJztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2xvb3BDaGFydCh0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykpO1xuICB9XG4gIF9vblBhblN0YXJ0KGV2ZW50KSB7XG4gICAgbGV0IGNoYXJ0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgIGlmICh0aGlzLl9jbG9zZXN0KGV2ZW50LnRhcmdldCwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlJykpIHx8XG4gICAgICAoZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICBjaGFydC5kYXRhc2V0LnBhbm5pbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2hhcnQuc3R5bGUuY3Vyc29yID0gJ21vdmUnO1xuICAgIGNoYXJ0LmRhdGFzZXQucGFubmluZyA9IHRydWU7XG5cbiAgICBsZXQgbGFzdFggPSAwLFxuICAgICAgbGFzdFkgPSAwLFxuICAgICAgbGFzdFRmID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY2hhcnQpLnRyYW5zZm9ybTtcblxuICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xuICAgICAgbGV0IHRlbXAgPSBsYXN0VGYuc3BsaXQoJywnKTtcblxuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgbGFzdFggPSBOdW1iZXIucGFyc2VJbnQodGVtcFs0XSwgMTApO1xuICAgICAgICBsYXN0WSA9IE51bWJlci5wYXJzZUludCh0ZW1wWzVdLCAxMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYXN0WCA9IE51bWJlci5wYXJzZUludCh0ZW1wWzEyXSwgMTApO1xuICAgICAgICBsYXN0WSA9IE51bWJlci5wYXJzZUludCh0ZW1wWzEzXSwgMTApO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RhcnRYID0gMCxcbiAgICAgIHN0YXJ0WSA9IDA7XG5cbiAgICBpZiAoIWV2ZW50LnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuIG9uIGRlc2t0b3BcbiAgICAgIHN0YXJ0WCA9IGV2ZW50LnBhZ2VYIC0gbGFzdFg7XG4gICAgICBzdGFydFkgPSBldmVudC5wYWdlWSAtIGxhc3RZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgIHN0YXJ0WCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBsYXN0WDtcbiAgICAgIHN0YXJ0WSA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjaGFydC5kYXRhc2V0LnBhblN0YXJ0ID0gSlNPTi5zdHJpbmdpZnkoeyAnc3RhcnRYJzogc3RhcnRYLCAnc3RhcnRZJzogc3RhcnRZIH0pO1xuICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uUGFubmluZy5iaW5kKHRoaXMpKTtcbiAgICBjaGFydC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblBhbm5pbmcuYmluZCh0aGlzKSk7XG4gIH1cbiAgX29uUGFubmluZyhldmVudCkge1xuICAgIGxldCBjaGFydCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICBpZiAoY2hhcnQuZGF0YXNldC5wYW5uaW5nID09PSAnZmFsc2UnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZXdYID0gMCxcbiAgICAgIG5ld1kgPSAwLFxuICAgICAgcGFuU3RhcnQgPSBKU09OLnBhcnNlKGNoYXJ0LmRhdGFzZXQucGFuU3RhcnQpLFxuICAgICAgc3RhcnRYID0gcGFuU3RhcnQuc3RhcnRYLFxuICAgICAgc3RhcnRZID0gcGFuU3RhcnQuc3RhcnRZO1xuXG4gICAgaWYgKCFldmVudC50YXJnZXRUb3VjaGVzKSB7IC8vIHBhbmQgb24gZGVza3RvcFxuICAgICAgbmV3WCA9IGV2ZW50LnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgbmV3WSA9IGV2ZW50LnBhZ2VZIC0gc3RhcnRZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgIG5ld1ggPSBldmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgbmV3WSA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBzdGFydFk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGxhc3RUZiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNoYXJ0KS50cmFuc2Zvcm07XG5cbiAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgIGlmICghbGFzdFRmLmluY2x1ZGVzKCczZCcpKSB7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9ICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9ICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG5cbiAgICAgIGlmICghbGFzdFRmLmluY2x1ZGVzKCczZCcpKSB7XG4gICAgICAgIG1hdHJpeFs0XSA9IG5ld1g7XG4gICAgICAgIG1hdHJpeFs1XSA9IG5ld1kgKyAnKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXhbMTJdID0gbmV3WDtcbiAgICAgICAgbWF0cml4WzEzXSA9IG5ld1k7XG4gICAgICB9XG4gICAgICBjaGFydC5zdHlsZS50cmFuc2Zvcm0gPSBtYXRyaXguam9pbignLCcpO1xuICAgIH1cbiAgfVxuICBfb25QYW5FbmQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGNoYXJ0LmRhdGFzZXQucGFubmluZyA9PT0gJ3RydWUnKSB7XG4gICAgICBjaGFydC5kYXRhc2V0LnBhbm5pbmcgPSBmYWxzZTtcbiAgICAgIGNoYXJ0LnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25QYW5uaW5nKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25QYW5uaW5nKTtcbiAgICB9XG4gIH1cbiAgX3NldENoYXJ0U2NhbGUoY2hhcnQsIG5ld1NjYWxlKSB7XG4gICAgbGV0IGxhc3RUZiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNoYXJ0KS50cmFuc2Zvcm07XG5cbiAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuXG4gICAgICBpZiAoIWxhc3RUZi5pbmNsdWRlcygnM2QnKSkge1xuICAgICAgICBtYXRyaXhbMF0gPSAnbWF0cml4KCcgKyBuZXdTY2FsZTtcbiAgICAgICAgbWF0cml4WzNdID0gbmV3U2NhbGU7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9IGxhc3RUZiArICcgc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFydC5zdHlsZS50cmFuc2Zvcm0gPSBsYXN0VGYgKyAnIHNjYWxlM2QoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnLCAxKSc7XG4gICAgICB9XG4gICAgfVxuICAgIGNoYXJ0LmRhdGFzZXQuc2NhbGUgPSBuZXdTY2FsZTtcbiAgfVxuICBfb25XaGVlbGluZyhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgbmV3U2NhbGUgPSBldmVudC5kZWx0YVkgPiAwID8gMC44IDogMS4yO1xuXG4gICAgdGhpcy5fc2V0Q2hhcnRTY2FsZSh0aGlzLmNoYXJ0LCBuZXdTY2FsZSk7XG4gIH1cbiAgX2dldFBpbmNoRGlzdChldmVudCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQoKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WCkgKlxuICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WCkgK1xuICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WSkgKlxuICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WSkpO1xuICB9XG4gIF9vblRvdWNoU3RhcnQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgIGxldCBkaXN0ID0gdGhpcy5fZ2V0UGluY2hEaXN0KGV2ZW50KTtcblxuICAgICAgY2hhcnQuZGF0YXNldC5waW5jaGluZyA9IHRydWU7XG4gICAgICBjaGFydC5kYXRhc2V0LnBpbmNoRGlzdFN0YXJ0ID0gZGlzdDtcbiAgICB9XG4gIH1cbiAgX29uVG91Y2hNb3ZlKGV2ZW50KSB7XG4gICAgbGV0IGNoYXJ0ID0gdGhpcy5jaGFydDtcblxuICAgIGlmIChjaGFydC5kYXRhc2V0LnBpbmNoaW5nKSB7XG4gICAgICBsZXQgZGlzdCA9IHRoaXMuX2dldFBpbmNoRGlzdChldmVudCk7XG5cbiAgICAgIGNoYXJ0LmRhdGFzZXQucGluY2hEaXN0RW5kID0gZGlzdDtcbiAgICB9XG4gIH1cbiAgX29uVG91Y2hFbmQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGNoYXJ0LmRhdGFzZXQucGluY2hpbmcpIHtcbiAgICAgIGNoYXJ0LmRhdGFzZXQucGluY2hpbmcgPSBmYWxzZTtcbiAgICAgIGxldCBkaWZmID0gY2hhcnQuZGF0YXNldC5waW5jaERpc3RFbmQgLSBjaGFydC5kYXRhc2V0LnBpbmNoRGlzdFN0YXJ0O1xuXG4gICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgdGhpcy5fc2V0Q2hhcnRTY2FsZShjaGFydCwgMSk7XG4gICAgICB9IGVsc2UgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgIHRoaXMuX3NldENoYXJ0U2NhbGUoY2hhcnQsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==
